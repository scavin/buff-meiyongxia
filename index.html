<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¨‹åºå‘˜å»¶å¯¿è®¡ç®—å™¨ | Programmer Longevity Calculator</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ§¬</text></svg>">
    <script src="config.js"></script>
    <script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a1a 100%);
            color: #00ff00;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #00ff00;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 0 30px rgba(0, 255, 0, 0.3);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            border-bottom: 2px solid #00ff00;
            padding-bottom: 20px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(0, 255, 0, 0.8);
        }

        .header .subtitle {
            color: #888;
            font-size: 1.1em;
        }

        .results {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            background: rgba(12, 12, 12, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid #00ff00;
            box-shadow: 0 2px 20px rgba(0, 255, 0, 0.3);
            padding: 15px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
        }

        .results-spacer {
            height: 200px; /* ä¸ºå›ºå®šç»“æœåŒºåŸŸé¢„ç•™ç©ºé—´ */
        }

        .result-card {
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid #00ff00;
            border-radius: 8px;
            padding: 15px 10px;
            text-align: center;
            transition: all 0.3s ease;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        .result-card:hover {
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
            transform: translateY(-2px);
        }

        .result-value {
            font-size: 2.2em;
            font-weight: bold;
            color: #00ff41;
            text-shadow: 0 0 15px rgba(0, 255, 65, 0.8);
            line-height: 1.1;
        }

        #health-level {
            font-size: 1.4em !important;
            line-height: 1.2;
        }

        .result-label {
            font-size: 1em;
            margin-top: 8px;
            color: #ccc;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            transition: all 0.3s ease;
        }
        
        .result-card.expanded .result-label {
            flex-direction: column;
            gap: 10px;
        }

        .level-description {
            font-size: 0.75em;
            color: #888;
            margin-top: 5px;
            font-style: italic;
            line-height: 1.3;
        }

        .tooltip-icon {
            color: #00ff41;
            cursor: pointer;
            font-size: 0.9em;
            user-select: none;
            transition: all 0.3s ease;
            padding: 4px;
            border-radius: 50%;
        }

        .tooltip-icon:hover {
            color: #ffffff;
            background: rgba(0, 255, 65, 0.2);
            text-shadow: 0 0 10px rgba(0, 255, 65, 0.8);
        }

        .tooltip-content {
            display: none;
            background: rgba(0, 255, 0, 0.05);
            border: 1px solid #00ff00;
            border-radius: 8px;
            padding: 12px;
            margin-top: 8px;
            font-size: 0.8em;
            line-height: 1.4;
            color: #ccc;
            max-width: 100%;
            animation: fadeIn 0.3s ease;
        }
        
        .result-card.expanded .tooltip-content {
            display: block;
        }
        
        .result-card.expanded {
            transform: scale(1.05);
            min-height: auto;
            padding: 20px 15px;
            z-index: 10;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
        }

        .category {
            background: rgba(0, 255, 0, 0.05);
            border: 1px solid #00ff00;
            border-radius: 10px;
            padding: 25px;
        }

        .category h3 {
            color: #00ff41;
            font-size: 1.5em;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 0 0 10px rgba(0, 255, 65, 0.6);
        }

        .action-item {
            margin-bottom: 25px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            border-left: 4px solid #00ff00;
        }

        .action-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .action-name {
            font-weight: bold;
            color: #00ff41;
            flex-grow: 1;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .reference-icon {
            color: #888;
            cursor: pointer;
            font-size: 0.8em;
            user-select: none;
            transition: all 0.3s ease;
            position: relative;
        }

        .reference-icon:hover {
            color: #00ff41;
            text-shadow: 0 0 5px rgba(0, 255, 65, 0.6);
        }

        .reference-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.95);
            color: #ffffff;
            padding: 12px;
            border-radius: 6px;
            border: 1px solid #00ff00;
            font-size: 0.75em;
            line-height: 1.3;
            width: 350px;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.4);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1001;
            pointer-events: none;
            margin-bottom: 12px;
        }

        .reference-tooltip::before {
            content: '';
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            height: 12px;
            background: transparent;
        }

        .reference-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 5px solid transparent;
            border-top-color: #00ff00;
        }

        .reference-icon:hover .reference-tooltip,
        .reference-icon:focus .reference-tooltip,
        .reference-icon.active .reference-tooltip {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }

        .reference-tooltip:hover {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }

        .reference-link {
            color: #00ff41;
            text-decoration: none;
            display: block;
            margin-top: 8px;
            padding: 4px 8px;
            border: 1px solid #00ff41;
            border-radius: 4px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .reference-link:hover {
            background: #00ff41;
            color: #000;
        }

        .action-benefit {
            color: #ffa500;
            font-size: 0.9em;
            margin-left: 10px;
        }

        .action-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 10px;
        }

        .slider {
            flex-grow: 1;
            -webkit-appearance: none;
            height: 8px;
            border-radius: 4px;
            background: #333;
            outline: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #00ff00;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.8);
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #00ff00;
            cursor: pointer;
            border: none;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.8);
        }

        .frequency-label {
            min-width: 120px;
            text-align: center;
            color: #ccc;
            font-size: 0.9em;
        }

        .action-description {
            font-size: 0.85em;
            color: #999;
            margin-top: 8px;
            line-height: 1.4;
        }

        .achievement {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: linear-gradient(135deg, rgba(0, 255, 0, 0.95), rgba(0, 204, 0, 0.95));
            color: #000;
            padding: 12px 20px;
            border-radius: 25px;
            font-weight: bold;
            transition: all 0.5s ease;
            z-index: 102;
            border: 2px solid #00ff00;
            box-shadow: 0 4px 20px rgba(0, 255, 0, 0.6);
            backdrop-filter: blur(10px);
            font-size: 0.9em;
            text-align: center;
            max-width: 300px;
            opacity: 0;
            pointer-events: none;
        }

        .achievement.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
            pointer-events: auto;
        }

        .achievement::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #00ff00, #00cc00, #00aa00, #00ff00);
            background-size: 400% 400%;
            border-radius: 27px;
            z-index: -1;
            animation: gradientMove 3s ease infinite;
        }

        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* ç»™æˆå°±é€šçŸ¥æ·»åŠ å›¾æ ‡åŠ¨ç”» */
        .achievement-icon {
            display: inline-block;
            margin-right: 6px;
            animation: bounce 0.6s ease-in-out;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .warning {
            background: rgba(255, 0, 0, 0.1);
            border: 1px solid #ff0000;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            color: #ff6666;
            text-align: center;
        }

        .code-style {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            background: rgba(0, 0, 0, 0.5);
            padding: 2px 6px;
            border-radius: 4px;
            color: #00ff41;
        }

        .share-container {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 101;
        }

        .share-btn {
            background: linear-gradient(135deg, #2196F3, #1976D2);
            color: #fff;
            border: 2px solid #2196F3;
            padding: 12px 20px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.4);
        }

        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(33, 150, 243, 0.6);
            background: linear-gradient(135deg, #1976D2, #1565C0);
            border-color: #1976D2;
        }

        .share-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            overflow-y: auto;
            padding: 20px;
        }

        .share-modal.show {
            display: flex;
        }

        .share-card {
            font-family: 'Microsoft YaHei', 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            background: #0D1117;
            border: 4px solid #00ff41;
            padding: 20px;
            max-width: 600px;
            width: 100%;
            position: relative;
            background-image: 
                linear-gradient(rgba(0, 255, 0, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 0, 0.05) 1px, transparent 1px);
            background-size: 20px 20px;
            box-sizing: border-box;
            overflow: hidden;
        }
        
        .close-modal {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            color: #888;
            font-size: 2em;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .close-modal:hover {
            color: #00ff41;
            transform: rotate(90deg);
        }

        .share-header-new {
            text-align: center;
            margin-bottom: 20px;
        }

        .share-title-new {
            font-size: 2em;
            color: #00ff41;
            text-shadow: 0 0 15px #00ff41;
            margin-bottom: 10px;
        }

        .share-subtitle-new {
            font-size: 1em;
            color: #888;
        }
        
        .share-inspirational-text {
            font-size: 1.1em;
            font-weight: bold;
            color: #00ff41;
            text-align: center;
            margin: 20px 0;
        }

        .share-stats-new {
            display: flex;
            justify-content: space-around;
            text-align: center;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 20px;
        }

        .share-stat-new .icon {
            font-size: 2.5em;
        }
        
        .share-stat-new .value {
            font-size: 2em;
            font-weight: bold;
            color: #00ff41;
        }

        .share-stat-new .label {
            font-size: 0.9em;
            color: #ccc;
        }

        .share-level-container {
            text-align: center;
            margin: 30px 0;
        }

        #share-level-display {
            font-size: 2.2em;
            font-weight: bold;
            text-shadow: 0 0 15px currentColor;
        }

        .share-gauge-container {
            width: 80%;
            margin: 15px auto;
        }

        .share-gauge-background {
            background: rgba(0, 255, 0, 0.1);
            height: 20px;
            border: 1px solid #00ff41;
        }

        #share-gauge-bar {
            height: 100%;
            background: linear-gradient(90deg, #5f27cd, #00d2d3, #00ff41);
            transition: width 0.5s ease-out;
        }
        
        #share-gauge-text {
            text-align: right;
            color: #fff;
            font-size: 0.9em;
            margin-top: 5px;
        }

        .share-habits-container {
            margin-top: 30px;
        }

        .share-habits-title {
            font-size: 1.5em;
            color: #00ff41;
            text-shadow: 0 0 10px #00ff41;
            margin-bottom: 15px;
        }

        .share-habit-item {
            background: rgba(0, 255, 0, 0.05);
            border-left: 4px solid #00ff41;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .share-habit-item .name {
            font-weight: bold;
            color: #fff;
            font-size: 1.1em;
        }
        
        .share-habit-item .level {
            color: #ccc;
            font-size: 0.9em;
            margin-left: 10px;
        }

        .share-habit-item .benefit {
            font-size: 1.2em;
            font-weight: bold;
            color: #ffa500;
            text-shadow: 0 0 10px #ffa500;
        }

        .share-footer-new {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #333;
        }
        
        .share-footer-new p {
            margin: 5px 0;
            color: #888;
            font-size: 0.9em;
        }
        
        .share-footer-new .link {
            color: #00ff41;
            font-weight: bold;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 8px 12px;
            border: 1px solid #00ff41;
            border-radius: 4px;
            background: rgba(0, 255, 65, 0.1);
            margin-top: 10px;
            display: block;
            width: fit-content;
            max-width: 100%;
            margin-left: auto;
            margin-right: auto;
            word-break: break-all;
            text-align: center;
            overflow-wrap: break-word;
        }
        
        .share-footer-new .link:hover {
            background: rgba(0, 255, 65, 0.2);
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.3);
        }

        .share-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        .share-platform-btn {
            background: #333;
            color: #fff;
            border: 1px solid #00ff41;
            padding: 10px 18px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .share-platform-btn:hover {
            background: #00ff41;
            color: #000;
            box-shadow: 0 0 15px #00ff41;
        }

        .share-platform-btn.primary {
            background: linear-gradient(135deg, #00ff00, #00cc00);
            color: #000;
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 255, 0, 0.4);
        }
        .share-platform-btn.primary:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(0, 255, 0, 0.6);
        }
        .share-recommendation {
            text-align: center;
            font-size: 0.9em;
            color: #888;
            margin-bottom: 15px;
        }

        #qrModal .share-card {
            padding: 40px;
            text-align: center;
        }
        
        #qr-code-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        
        #qr-code-container #qrcode {
            border: 4px solid #00ff41;
            padding: 10px;
            background: #fff;
            border-radius: 8px;
        }
        
        #qr-code-container p {
            color: #ccc;
            font-size: 1.1em;
            word-break: break-all;
            overflow-wrap: break-word;
            max-width: 90%;
        }

        .footer-info {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            border-top: 1px solid #333;
            color: #666;
            font-size: 0.9em;
            margin-bottom: 100px; /* ä¸ºæ‚¬æµ®åˆ†äº«æŒ‰é’®ç•™ç©ºé—´ */
        }

        .about-link {
            cursor: pointer;
            text-decoration: underline;
            color: #00ff41;
        }
        .about-link:hover {
            text-shadow: 0 0 8px rgba(0, 255, 65, 0.6);
        }
        .about-content {
            padding: 10px 20px;
        }
        .about-content p {
            color: #ccc;
            font-size: 1.1em;
            margin-bottom: 15px;
            line-height: 1.8;
            text-align: left;
        }
        .about-content strong {
            color: #fff;
        }
        .about-content a {
            color: #00ff41;
            text-decoration: none;
            border-bottom: 1px dotted #00ff41;
            transition: all 0.3s ease;
        }
        .about-content a:hover {
            background: #00ff41;
            color: #000;
            border-bottom: 1px solid #00ff41;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                box-shadow: 0 5px 15px rgba(0, 255, 0, 0.4);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 8px 25px rgba(0, 255, 0, 0.8);
            }
            100% {
                transform: scale(1);
                box-shadow: 0 5px 15px rgba(0, 255, 0, 0.4);
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 0;
                padding-top: 10px;
            }
            
            .container {
                padding: 15px;
                margin: 0;
                max-width: 100%;
                box-sizing: border-box;
            }
            
            .results {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .results-spacer {
                height: 180px;
            }
            
            .result-card {
                padding: 10px 8px;
                min-height: 70px;
            }
            
            .result-value {
                font-size: 1.6em;
            }
            
            #health-level {
                font-size: 1.1em !important;
            }
            
            .result-label {
                font-size: 0.8em;
                margin-top: 4px;
                gap: 4px;
            }
            
            .level-description {
                font-size: 0.7em;
                margin-top: 2px;
            }
            
            .share-container {
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                z-index: 101;
            }
            
            .share-btn {
                padding: 15px 25px;
                font-size: 1em;
                border-radius: 25px;
                box-shadow: 0 4px 20px rgba(33, 150, 243, 0.4);
            }
            
            .categories {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .category {
                padding: 15px;
                margin: 0;
                border-radius: 8px;
                overflow: hidden;
            }
            
            .header h1 {
                font-size: 1.6em;
                line-height: 1.2;
                margin-bottom: 8px;
            }
            
            .header .subtitle {
                font-size: 0.9em;
            }
            
            .header {
                margin-bottom: 20px;
                padding-bottom: 15px;
            }
            
            .action-item {
                margin-bottom: 20px;
                padding: 12px;
            }
            
            .action-controls {
                flex-direction: column;
                gap: 10px;
                margin-top: 10px;
            }
            
            .slider {
                width: 100%;
                height: 12px;
                margin: 10px 0;
            }
            
            .slider::-webkit-slider-thumb {
                width: 28px;
                height: 28px;
                margin-top: -10px;
            }
            
            .slider::-moz-range-thumb {
                width: 28px;
                height: 28px;
                border: 2px solid #00ff00;
                background: #00ff00;
            }
            
            .frequency-label {
                min-width: auto;
                width: 100%;
                text-align: center;
                font-size: 1em;
                padding: 8px;
                background: rgba(0, 255, 0, 0.1);
                border-radius: 4px;
                border: 1px solid rgba(0, 255, 0, 0.3);
            }
            
            .action-name {
                font-size: 1.1em;
                flex-wrap: wrap;
            }
            
            .action-benefit {
                font-size: 1em;
                margin-left: 0;
                margin-top: 5px;
            }
            
            .action-description {
                font-size: 0.9em;
                line-height: 1.5;
            }
            
            .tooltip-content {
                font-size: 0.75em;
                padding: 10px;
            }
            
            .reference-tooltip {
                width: 300px;
                font-size: 0.75em;
                padding: 10px;
            }
            
            .achievement {
                position: fixed;
                bottom: 100px;
                left: 50%;
                transform: translateX(-50%) translateY(120px);
                padding: 10px 16px;
                font-size: 0.85em;
                max-width: 280px;
                border-radius: 20px;
            }
            
            .achievement.show {
                transform: translateX(-50%) translateY(0);
            }
            
            .share-card {
                margin: 5px;
                padding: 15px;
                max-width: calc(100vw - 30px);
                max-height: calc(100vh - 40px);
                overflow-y: auto;
            }
            
            .share-footer-new .link {
                font-size: 0.8em;
                padding: 6px 10px;
                margin-top: 15px;
                word-break: break-all;
            }
            
            .share-stats-new {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .share-buttons {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
            
            .share-platform-btn {
                width: 100%;
                max-width: 250px;
                padding: 12px 20px;
                font-size: 1em;
            }
            
            .footer-info {
                margin-top: 20px;
                padding: 15px;
                font-size: 0.85em;
                margin-bottom: 100px; /* ä¸ºæ‚¬æµ®æŒ‰é’®ç•™ç©ºé—´ */
            }
        }
        
        /* å¢å¼ºè§¦æ‘¸ä½“éªŒ */
        @media (hover: none) and (pointer: coarse) {
            .slider::-webkit-slider-thumb {
                width: 32px;
                height: 32px;
                margin-top: -12px;
            }
            
            .slider::-moz-range-thumb {
                width: 32px;
                height: 32px;
            }
            
            .tooltip-icon,
            .reference-icon {
                font-size: 1.2em;
                padding: 8px;
                margin: -8px;
            }
            
            .action-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            
            .action-name {
                width: 100%;
            }
            
            .action-benefit {
                align-self: flex-start;
            }
            
            .share-btn {
                padding: 15px 20px;
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="results">
            <div class="result-card">
                <div class="result-value" id="acm-reduction">0%</div>
                <div class="result-label">
                    ç”Ÿå­˜ä¼˜åŠ¿æå‡
                    <span class="tooltip-icon" tabindex="0">â“</span>
                    <div class="tooltip-content">
                        <strong>ç”Ÿå­˜ä¼˜åŠ¿ (Survival Advantage)</strong><br>
                        é€šè¿‡å¥åº·ç”Ÿæ´»æ–¹å¼è·å¾—çš„ç”Ÿå­˜èƒ½åŠ›æå‡ã€‚åŸºäºå…¨å› æ­»äº¡ç‡(ACM)é™ä½è®¡ç®—ï¼Œåæ˜ æ€»ä½“å¥åº·é£é™©çš„æ”¹å–„ç¨‹åº¦ã€‚ä¾‹å¦‚ï¼š10%çš„ç”Ÿå­˜ä¼˜åŠ¿è¡¨ç¤ºç”Ÿå­˜èƒ½åŠ›ç›¸å¯¹æå‡10%ã€‚
                    </div>
                </div>
            </div>
            <div class="result-card">
                <div class="result-value" id="life-extension">+0</div>
                <div class="result-label">é¢„æœŸå¯¿å‘½å¢åŠ ï¼ˆå¹´ï¼‰</div>
            </div>
            <div class="result-card">
                <div class="result-value" id="health-score">0</div>
                <div class="result-label">
                    å¥åº·è¯„åˆ†
                    <span class="tooltip-icon" tabindex="0">â“</span>
                    <div class="tooltip-content">
                        <strong>å¥åº·è¯„åˆ†è®¡ç®—æ–¹å¼</strong><br>
                        åŸºäºæ‚¨é€‰æ‹©çš„å¥åº·è¡Œä¸ºè®¡ç®—ï¼šè¯„åˆ† = ACMé™ä½% Ã— 2 + è¡Œä¸ºæ•°é‡ Ã— 10ã€‚åˆ†æ•°è¶Šé«˜è¡¨ç¤ºå¥åº·æ°´å¹³è¶Šå¥½ï¼Œæœ€é«˜1000åˆ†ã€‚è¿™æ˜¯ä¸€ä¸ªç»¼åˆè¯„ä¼°æ‚¨å½“å‰ç”Ÿæ´»æ–¹å¼å¥åº·ç¨‹åº¦çš„æŒ‡æ ‡ã€‚
                    </div>
                </div>
            </div>
            <div class="result-card" id="health-level-card">
                <div class="result-value" id="health-level">ğŸ› Bugä¿®å¤ä¸­</div>
                <div class="result-label">å½“å‰ç­‰çº§</div>
                <div class="level-description" id="level-description">ç”Ÿå‘½ä»£ç éœ€è¦debug</div>
            </div>
        </div>

        <div class="share-container">
            <button class="share-btn" onclick="openShareModal()">
                ğŸš€ åˆ†äº«æˆæœ
            </button>
        </div>

        <div class="results-spacer"></div>

        <div class="header">
            <h1>ğŸ§¬ ç¨‹åºå‘˜å»¶å¯¿è®¡ç®—å™¨ ğŸ’»</h1>
            <div class="subtitle">
                åŸºäºç§‘å­¦ç ”ç©¶çš„ç”Ÿå‘½å€¼ä¼˜åŒ–å·¥å…·<br>
                <span class="code-style">while(alive) { optimize_health(); }</span>
            </div>
        </div>

        <div class="warning">
            âš ï¸ <strong>å…è´£å£°æ˜ï¼š</strong>æœ¬è®¡ç®—å™¨ä»…ä¾›å¨±ä¹ï¼Œä¸æ„æˆåŒ»å­¦å»ºè®®ã€‚è¯·å’¨è¯¢ä¸“ä¸šåŒ»ç”Ÿè·å–å¥åº·æŒ‡å¯¼ã€‚
        </div>

        <div class="categories">
            <div class="category">
                <h3>ğŸ é¥®é£Ÿä¼˜åŒ– (Diet.optimize())</h3>
                
                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            ç™½è‚‰æ‘„å…¥
                            <span class="reference-icon" tabindex="0">ğŸ“Š
                                <div class="reference-tooltip">
                                    <strong>ç§‘å­¦ä¾æ®ï¼š</strong><br>
                                    Pan A, et al. Red meat consumption and mortality: results from 2 prospective cohort studies. Arch Intern Med. 2012.
                                    <a href="https://doi.org/10.1001/archinternmed.2011.2287" target="_blank" class="reference-link">ğŸ”— æŸ¥çœ‹æ–‡çŒ®</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-3% ~ -11% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="7" value="0" data-action="white-meat">
                        <span class="frequency-label" id="white-meat-label">ä»ä¸</span>
                    </div>
                    <div class="action-description">
                        ç”¨é¸¡è‚‰ã€é±¼è‚‰æ›¿ä»£çº¢è‚‰ï¼Œé™ä½å¿ƒè¡€ç®¡ç–¾ç—…é£é™©
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            è”¬æœæ‘„å…¥
                            <span class="reference-icon" tabindex="0">ğŸ“Š
                                <div class="reference-tooltip">
                                    <strong>ç§‘å­¦ä¾æ®ï¼š</strong><br>
                                    Wang X, et al. Fruit and vegetable consumption and mortality from all causes, cardiovascular disease, and cancer. BMJ. 2014.
                                    <a href="https://doi.org/10.1136/bmj.g4490" target="_blank" class="reference-link">ğŸ”— æŸ¥çœ‹æ–‡çŒ®</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-17% ~ -26% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="5" value="0" data-action="vegetables-fruits">
                        <span class="frequency-label" id="vegetables-fruits-label">å¾ˆå°‘</span>
                    </div>
                    <div class="action-description">
                        æ¯å¤©200gæ–°é²œæ°´æœï¼Œå¤šåƒè¥¿å…°èŠ±ç­‰å¯Œå«é»„é…®ç±»é£Ÿç‰©
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            åšæœæ‘„å…¥
                            <span class="reference-icon" tabindex="0">ğŸ“Š
                                <div class="reference-tooltip">
                                    <strong>ç§‘å­¦ä¾æ®ï¼š</strong><br>
                                    Bao Y, et al. Association of nut consumption with total and cause-specific mortality. N Engl J Med. 2013.
                                    <a href="https://doi.org/10.1056/NEJMoa1307352" target="_blank" class="reference-link">ğŸ”— æŸ¥çœ‹æ–‡çŒ®</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-4% ~ -27% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="7" value="0" data-action="nuts">
                        <span class="frequency-label" id="nuts-label">ä»ä¸</span>
                    </div>
                    <div class="action-description">
                        æ¯å‘¨5ä»½ä»¥ä¸Šåšæœï¼Œæ¯ä»½28gï¼Œæ ¸æ¡ƒæ•ˆæœæœ€ä½³
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            è¾›è¾£é£Ÿç‰©
                            <span class="reference-icon" tabindex="0">ğŸ“Š
                                <div class="reference-tooltip">
                                    <strong>ç§‘å­¦ä¾æ®ï¼š</strong><br>
                                    Lv J, et al. Consumption of spicy foods and total and cause specific mortality: population based cohort study. BMJ. 2015.
                                    <a href="https://doi.org/10.1136/bmj.h3942" target="_blank" class="reference-link">ğŸ”— æŸ¥çœ‹æ–‡çŒ®</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-23% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="7" value="0" data-action="spicy-food">
                        <span class="frequency-label" id="spicy-food-label">ä»ä¸</span>
                    </div>
                    <div class="action-description">
                        æ¯å‘¨åƒè¾£>4æ¬¡ï¼Œå¿ƒè¡€ç®¡æ­»äº¡é£é™©é™ä½34%
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            é¿å…è¶…åŠ å·¥é£Ÿç‰©
                            <span class="reference-icon" tabindex="0">ğŸ“Š
                                <div class="reference-tooltip">
                                    <strong>ç§‘å­¦ä¾æ®ï¼š</strong><br>
                                    Rico-CampÃ  A, et al. Association between consumption of ultra-processed foods and all cause mortality: SUN prospective cohort study. BMJ. 2019.
                                    <a href="https://doi.org/10.1136/bmj.l1949" target="_blank" class="reference-link">ğŸ”— æŸ¥çœ‹æ–‡çŒ®</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-18% ~ -62% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="4" value="0" data-action="avoid-processed">
                        <span class="frequency-label" id="avoid-processed-label">ç»å¸¸åƒ</span>
                    </div>
                    <div class="action-description">
                        å‡å°‘è–¯ç‰‡ã€æ±‰å ¡ã€æ–¹ä¾¿é¢ç­‰è¶…åŠ å·¥é£Ÿå“æ‘„å…¥
                    </div>
                </div>
            </div>

            <div class="category">
                <h3>ğŸ¥¤ é¥®å“é€‰æ‹© (Drink.select())</h3>
                
                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            å’–å•¡
                            <span class="reference-icon" tabindex="0">ğŸ“Š
                                <div class="reference-tooltip">
                                    <strong>ç§‘å­¦ä¾æ®ï¼š</strong><br>
                                    Ding M, et al. Association of Coffee Consumption With Total and Cause-Specific Mortality in 3 Large Prospective Cohorts. Circulation. 2015.
                                    <a href="https://doi.org/10.1161/CIRCULATIONAHA.115.017341" target="_blank" class="reference-link">ğŸ”— æŸ¥çœ‹æ–‡çŒ®</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-12% ~ -22% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="5" value="0" data-action="coffee">
                        <span class="frequency-label" id="coffee-label">ä»ä¸</span>
                    </div>
                    <div class="action-description">
                        æ¯å¤©3.5æ¯æœ€ä½³ï¼Œç¨‹åºå‘˜å¿…å¤‡ç”Ÿå­˜å·¥å…·
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            èŒ¶
                            <span class="reference-icon" tabindex="0">ğŸ“Š
                                <div class="reference-tooltip">
                                    <strong>ç§‘å­¦ä¾æ®ï¼š</strong><br>
                                    Li X, et al. Tea consumption and risk of stroke in Chinese adults: a prospective cohort study of 0.5 million men and women. Lancet Public Health. 2020.
                                    <a href="https://doi.org/10.1016/S2468-2667(19)30227-7" target="_blank" class="reference-link">ğŸ”— æŸ¥çœ‹æ–‡çŒ®</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-8% ~ -15% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="5" value="0" data-action="tea">
                        <span class="frequency-label" id="tea-label">ä»ä¸</span>
                    </div>
                    <div class="action-description">
                        æ¯å‘¨3æ¬¡ä»¥ä¸Šï¼Œé¢„æœŸå¯¿å‘½å¢åŠ 1.26å¹´
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            ç‰›å¥¶
                            <span class="reference-icon" tabindex="0">ğŸ“Š
                                <div class="reference-tooltip">
                                    <strong>ç§‘å­¦ä¾æ®ï¼š</strong><br>
                                    Guo J, et al. Milk and dairy consumption and risk of cardiovascular diseases and all-cause mortality: dose-response meta-analysis of prospective cohort studies. Eur J Epidemiol. 2017.
                                    <a href="https://doi.org/10.1007/s10654-017-0243-1" target="_blank" class="reference-link">ğŸ”— æŸ¥çœ‹æ–‡çŒ®</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-10% ~ -17% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="3" value="0" data-action="milk">
                        <span class="frequency-label" id="milk-label">ä»ä¸</span>
                    </div>
                    <div class="action-description">
                        æ¯å¤©2ä»½ä¹³åˆ¶å“ï¼Œå¿ƒè¡€ç®¡æ­»äº¡é£é™©ä¸‹é™23%
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            æˆ’é…’
                            <span class="reference-icon" tabindex="0">ğŸ“Š
                                <div class="reference-tooltip">
                                    <strong>ç§‘å­¦ä¾æ®ï¼š</strong><br>
                                    Wood AM, et al. Risk thresholds for alcohol consumption: combined analysis of individual-participant data for 599 912 current drinkers. Lancet. 2018.
                                    <a href="https://doi.org/10.1016/S0140-6736(18)30134-X" target="_blank" class="reference-link">ğŸ”— æŸ¥çœ‹æ–‡çŒ®</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-50% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="4" value="0" data-action="no-alcohol">
                        <span class="frequency-label" id="no-alcohol-label">æ¯å¤©å–</span>
                    </div>
                    <div class="action-description">
                        é…’ç²¾å¯¹å¥åº·ç™¾å®³æ— ä¸€åˆ©ï¼Œæˆ’é…’æ˜¯æœ€æœ‰æ•ˆçš„å»¶å¯¿æ–¹æ³•ä¹‹ä¸€
                    </div>
                </div>
            </div>

            <div class="category">
                <h3>ğŸƒâ€â™‚ï¸ è¿åŠ¨é”»ç‚¼ (Exercise.execute())</h3>
                
                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            æŒ¥æ‹è¿åŠ¨
                            <span class="reference-icon" tabindex="0">ğŸ“Š
                                <div class="reference-tooltip">
                                    <strong>ç§‘å­¦ä¾æ®ï¼š</strong><br>
                                    Oja P, et al. Associations of specific types of sports and exercise with all-cause and cardiovascular-disease mortality: a cohort study of 80 306 British adults. Br J Sports Med. 2017.
                                    <a href="https://doi.org/10.1136/bjsports-2016-096822" target="_blank" class="reference-link">ğŸ”— æŸ¥çœ‹æ–‡çŒ®</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-47% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="5" value="0" data-action="racquet-sports">
                        <span class="frequency-label" id="racquet-sports-label">ä»ä¸</span>
                    </div>
                    <div class="action-description">
                        ç½‘çƒã€ç¾½æ¯›çƒã€ä¹’ä¹“çƒï¼Œæ¯å‘¨3æ¬¡ï¼Œæ¯æ¬¡45-60åˆ†é’Ÿ
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            å‰§çƒˆè¿åŠ¨
                            <span class="reference-icon" tabindex="0">ğŸ“Š
                                <div class="reference-tooltip">
                                    <strong>ç§‘å­¦ä¾æ®ï¼š</strong><br>
                                    Stamatakis E, et al. Association of wearable device-measured vigorous intermittent lifestyle physical activity with mortality. Nat Med. 2022.
                                    <a href="https://doi.org/10.1038/s41591-022-02100-x" target="_blank" class="reference-link">ğŸ”— æŸ¥çœ‹æ–‡çŒ®</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-16% ~ -40% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="7" value="0" data-action="vigorous-exercise">
                        <span class="frequency-label" id="vigorous-exercise-label">ä»ä¸</span>
                    </div>
                    <div class="action-description">
                        æ¯å¤©8åˆ†é’Ÿå‰§çƒˆè¿åŠ¨ï¼Œè®©å¿ƒç‡é£™å‡çš„é‚£ç§
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            æ­¥è¡Œ
                            <span class="reference-icon" tabindex="0">ğŸ“Š
                                <div class="reference-tooltip">
                                    <strong>ç§‘å­¦ä¾æ®ï¼š</strong><br>
                                    Paluch AE, et al. Daily steps and all-cause mortality: a meta-analysis of 15 international cohorts. Lancet Public Health. 2022.
                                    <a href="https://doi.org/10.1016/S2468-2667(21)00302-9" target="_blank" class="reference-link">ğŸ”— æŸ¥çœ‹æ–‡çŒ®</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-50% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="4" value="0" data-action="walking">
                        <span class="frequency-label" id="walking-label">&lt;2000æ­¥</span>
                    </div>
                    <div class="action-description">
                        æ¯å¤©7000æ­¥ä»¥ä¸Šï¼Œè¿œç¦»ä¹…åçš„ç¨‹åºå‘˜èŒä¸šç—…
                    </div>
                </div>
            </div>

            <div class="category">
                <h3>ğŸŒ™ ç”Ÿæ´»ä¹ æƒ¯ (Lifestyle.config())</h3>
                
                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            ç¡çœ è´¨é‡
                            <span class="reference-icon" tabindex="0">ğŸ“Š
                                <div class="reference-tooltip">
                                    <strong>ç§‘å­¦ä¾æ®ï¼š</strong><br>
                                    Cappuccio FP, et al. Sleep duration and all-cause mortality: a systematic review and meta-analysis of prospective studies. Sleep. 2010.
                                    <a href="https://doi.org/10.1093/sleep/33.5.585" target="_blank" class="reference-link">ğŸ”— æŸ¥çœ‹æ–‡çŒ®</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">ä¼˜åŒ–ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="4" value="0" data-action="sleep">
                        <span class="frequency-label" id="sleep-label">å¾ˆå·®</span>
                    </div>
                    <div class="action-description">
                        æ¯å¤©7å°æ—¶ï¼Œ22-24ç‚¹å…¥ç¡æœ€ä½³ï¼Œè¿œç¦»ç†¬å¤œbug
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            åˆ·ç‰™
                            <span class="reference-icon" tabindex="0">ğŸ“Š
                                <div class="reference-tooltip">
                                    <strong>ç§‘å­¦ä¾æ®ï¼š</strong><br>
                                    Sen S, et al. Periodontal Disease, Regular Dental Care Use, and Incident Ischemic Stroke. Stroke. 2018.
                                    <a href="https://doi.org/10.1161/STROKEAHA.117.018990" target="_blank" class="reference-link">ğŸ”— æŸ¥çœ‹æ–‡çŒ®</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-25% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="3" value="0" data-action="brush-teeth">
                        <span class="frequency-label" id="brush-teeth-label">å¾ˆå°‘</span>
                    </div>
                    <div class="action-description">
                        æ¯å¤©2æ¬¡ï¼Œå£è…”å¥åº·å½±å“å…¨èº«å¥åº·
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            æ™’å¤ªé˜³
                            <span class="reference-icon" tabindex="0">ğŸ“Š
                                <div class="reference-tooltip">
                                    <strong>ç§‘å­¦ä¾æ®ï¼š</strong><br>
                                    Lindqvist PG, et al. Avoidance of sun exposure as a risk factor for major causes of death: a competing risk analysis of the Melanoma in Southern Sweden cohort. J Intern Med. 2016.
                                    <a href="https://doi.org/10.1111/joim.12496" target="_blank" class="reference-link">ğŸ”— æŸ¥çœ‹æ–‡çŒ®</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-40% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="4" value="0" data-action="sunlight">
                        <span class="frequency-label" id="sunlight-label">ä»ä¸</span>
                    </div>
                    <div class="action-description">
                        é€‚åº¦æ—¥ç…§ï¼Œä¿ƒè¿›ç»´ç”Ÿç´ Dåˆæˆï¼Œåˆ«å½“å¸è¡€é¬¼ç¨‹åºå‘˜
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            æˆ’çƒŸ
                            <span class="reference-icon" tabindex="0">ğŸ“Š
                                <div class="reference-tooltip">
                                    <strong>ç§‘å­¦ä¾æ®ï¼š</strong><br>
                                    Jha P, et al. 21st-century hazards of smoking and benefits of cessation in the United States. N Engl J Med. 2013.
                                    <a href="https://doi.org/10.1056/NEJMsa1211128" target="_blank" class="reference-link">ğŸ”— æŸ¥çœ‹æ–‡çŒ®</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-50% ACM +11å¹´</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="4" value="0" data-action="no-smoking">
                        <span class="frequency-label" id="no-smoking-label">é‡åº¦å¸çƒŸ</span>
                    </div>
                    <div class="action-description">
                        å¸çƒŸå‡å°‘11-12å¹´å¯¿å‘½ï¼Œæˆ’çƒŸæ˜¯æœ€é‡è¦çš„å»¶å¯¿è¡ŒåŠ¨
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            ä½“é‡ç®¡ç†
                            <span class="reference-icon" tabindex="0">ğŸ“Š
                                <div class="reference-tooltip">
                                    <strong>ç§‘å­¦ä¾æ®ï¼š</strong><br>
                                    Aune D, et al. BMI and all cause mortality: systematic review and non-linear dose-response meta-analysis of 230 cohort studies. BMJ. 2016.
                                    <a href="https://doi.org/10.1136/bmj.i2156" target="_blank" class="reference-link">ğŸ”— æŸ¥çœ‹æ–‡çŒ®</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-54% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="4" value="0" data-action="weight-management">
                        <span class="frequency-label" id="weight-management-label">è‚¥èƒ–</span>
                    </div>
                    <div class="action-description">
                        ä¿æŒå¥åº·BMIï¼Œä»è‚¥èƒ–åˆ°è¶…é‡çš„å‡è‚¥æ•ˆæœæœ€æ˜æ˜¾
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer-info">
            <p>è®©ä»£ç åƒç”Ÿå‘½ä¸€æ ·ä¼˜é›…</p>
            <p>Â© <span id="copyright-year">2025</span> meiyongxia | <span class="about-link" onclick="openAboutModal()">about</span></p>
        </div>
    </div>

    <div class="achievement" id="achievement">
        ğŸ‰ æˆå°±è§£é”ï¼šå¥åº·ç¨‹åºå‘˜ï¼
    </div>

    <!-- About Modal -->
    <div class="share-modal" id="aboutModal">
        <div class="share-card">
            <button class="close-modal" onclick="closeAboutModal()">Ã—</button>
            <div class="share-header-new">
                <div class="share-title-new">// ABOUT</div>
            </div>
            <div class="about-content">
                <p><strong>å¼€æºï¼š</strong> <a href="https://github.com/scavin/buff-meiyongxia/" target="_blank">https://github.com/scavin/buff-meiyongxia/</a></p>
                <p><strong>è”ç³»æˆ‘ä»¬:</strong> buff@meiyongxia.com</p>
                <p><strong>çˆ±å‘ç”µ:</strong> <a href="https://afdian.com/a/qingxwa" target="_blank">https://afdian.com/a/qingxwa</a></p>
            </div>
        </div>
    </div>

    <!-- åˆ†äº«æ¨¡æ€æ¡† -->
    <div class="share-modal" id="shareModal">
        <div class="share-card">
            <button class="close-modal" onclick="closeShareModal()">Ã—</button>
            
            <div class="share-header-new">
                <div class="share-title-new">// å¥åº·æŠ¥å‘Š.LOG</div>
                <div class="share-subtitle-new">ç¨‹åºå‘˜å»¶å¯¿æŒ‡å—</div>
            </div>

            <div class="share-inspirational-text">ğŸ† æˆ‘æˆåŠŸhackäº†è‡ªå·±çš„ç”Ÿå‘½ä»£ç ï¼</div>

            <div class="share-stats-new">
                <div class="share-stat-new">
                    <div class="icon">ğŸ›¡ï¸</div>
                    <div class="value" id="share-acm-new">0%</div>
                    <div class="label">ç”Ÿå­˜ä¼˜åŠ¿æå‡</div>
                </div>
                <div class="share-stat-new">
                    <div class="icon">â¤ï¸</div>
                    <div class="value" id="share-life-new">+0</div>
                    <div class="label">å¯¿å‘½å¢åŠ </div>
                </div>
                <div class="share-stat-new">
                    <div class="icon">ğŸ†</div>
                    <div class="value" id="share-score-new">0</div>
                    <div class="label">å¥åº·è¯„åˆ†</div>
                </div>
            </div>

            <div class="share-level-container">
                <div id="share-level-display">ğŸ› Bugä¿®å¤ä¸­</div>
                <div class="share-gauge-container">
                    <div class="share-gauge-background">
                        <div id="share-gauge-bar"></div>
                    </div>
                    <div id="share-gauge-text">0 / 1000</div>
                </div>
            </div>

            <div class="share-habits-container">
                <div class="share-habits-title">// æ ¸å¿ƒå¥åº·ä¹ æƒ¯</div>
                <div id="share-top-habits-new"></div>
            </div>

            <div class="share-footer-new">
                <p>åŸºäºé¡¶çº§æœŸåˆŠè®ºæ–‡çš„å¥åº·ä¼˜åŒ–</p>
                <p class="link" id="share-url-display" onclick="copyShareUrl()">ğŸ”— buff.meiyongxia.com</p>
            </div>

            <div class="share-recommendation">
                <p>âœ¨ æ¨èç”Ÿæˆå›¾ç‰‡åˆ†äº«ï¼Œæ•ˆæœæ›´ä½³ï¼</p>
            </div>
            <div class="share-buttons">
                <button class="share-platform-btn primary" onclick="generateShareImage()">
                    ğŸ“¸ ç”Ÿæˆå›¾ç‰‡
                </button>
                <button class="share-platform-btn" onclick="openQrModal()">
                    ğŸ”— ç”Ÿæˆåˆ†äº«äºŒç»´ç 
                </button>
                <button class="share-platform-btn" onclick="copyShareText()">
                    ğŸ“‹ å¤åˆ¶æ–‡æ¡ˆ
                </button>
            </div>
        </div>
    </div>

    <!-- QR Code Modal -->
    <div class="share-modal" id="qrModal">
        <div class="share-card">
            <button class="close-modal" onclick="closeQrModal()">Ã—</button>
            <div class="share-header-new">
                <div class="share-title-new">// SCAN_TO_SHARE</div>
            </div>
            <div id="qr-code-container">
                <p>æ‰«æäºŒç»´ç ï¼Œåˆ†äº«æˆ–æŸ¥çœ‹ä½ çš„å¥åº·æ•°æ®ï¼</p>
            </div>
        </div>
    </div>

    <script>
        const actionData = {
            'white-meat': {
                benefits: [0, 1, 2, 3, 5, 7, 9, 11],
                labels: ['ä»ä¸', 'å¾ˆå°‘', 'å¶å°”', 'ä¸€èˆ¬', 'ç»å¸¸', 'å¾ˆå¤š', 'ä¸»è¦', 'å®Œå…¨æ›¿ä»£'],
                reference: 'Pan A, et al. Red meat consumption and mortality: results from 2 prospective cohort studies. Arch Intern Med. 2012;172(7):555-563.',
                doi: 'https://doi.org/10.1001/archinternmed.2011.2287'
            },
            'vegetables-fruits': {
                benefits: [0, 5, 10, 15, 20, 26],
                labels: ['å¾ˆå°‘', 'ä¸å¤Ÿ', 'ä¸€èˆ¬', 'è¾ƒå¤š', 'å……è¶³', 'ä¸°å¯Œ'],
                reference: 'Wang X, et al. Fruit and vegetable consumption and mortality from all causes, cardiovascular disease, and cancer: systematic review and dose-response meta-analysis. BMJ. 2014;349:g4490.',
                doi: 'https://doi.org/10.1136/bmj.g4490'
            },
            'nuts': {
                benefits: [0, 2, 4, 8, 15, 20, 25, 27],
                labels: ['ä»ä¸', 'å¾ˆå°‘', 'å¶å°”', 'æ¯å‘¨1-2æ¬¡', 'æ¯å‘¨3-4æ¬¡', 'æ¯å‘¨5-6æ¬¡', 'æ¯å¤©', 'æ¯å¤©å¤šæ¬¡'],
                reference: 'Bao Y, et al. Association of nut consumption with total and cause-specific mortality. N Engl J Med. 2013;369(21):2001-2011.',
                doi: 'https://doi.org/10.1056/NEJMoa1307352'
            },
            'spicy-food': {
                benefits: [0, 2, 5, 8, 15, 20, 23, 23],
                labels: ['ä»ä¸', 'å¾ˆå°‘', 'å¶å°”', 'æ¯å‘¨1-2æ¬¡', 'æ¯å‘¨3-4æ¬¡', 'æ¯å‘¨5+æ¬¡', 'æ¯å¤©', 'æ¯å¤©å¤šæ¬¡'],
                reference: 'Lv J, et al. Consumption of spicy foods and total and cause specific mortality: population based cohort study. BMJ. 2015;351:h3942.',
                doi: 'https://doi.org/10.1136/bmj.h3942'
            },
            'avoid-processed': {
                benefits: [0, 10, 25, 40, 62],
                labels: ['ç»å¸¸åƒ', 'å¶å°”åƒ', 'å¾ˆå°‘åƒ', 'åŸºæœ¬ä¸åƒ', 'å®Œå…¨é¿å…'],
                reference: 'Rico-CampÃ  A, et al. Association between consumption of ultra-processed foods and all cause mortality: SUN prospective cohort study. BMJ. 2019;365:l1949.',
                doi: 'https://doi.org/10.1136/bmj.l1949'
            },
            'coffee': {
                benefits: [0, 5, 10, 15, 20, 22],
                labels: ['ä»ä¸', 'å¶å°”', 'æ¯å¤©1æ¯', 'æ¯å¤©2æ¯', 'æ¯å¤©3æ¯', 'æ¯å¤©4+æ¯'],
                reference: 'Ding M, et al. Association of Coffee Consumption With Total and Cause-Specific Mortality in 3 Large Prospective Cohorts. Circulation. 2015;132(24):2305-2315.',
                doi: 'https://doi.org/10.1161/CIRCULATIONAHA.115.017341'
            },
            'tea': {
                benefits: [0, 3, 6, 10, 13, 15],
                labels: ['ä»ä¸', 'å¶å°”', 'æ¯å‘¨1-2æ¬¡', 'æ¯å‘¨3+æ¬¡', 'æ¯å¤©', 'æ¯å¤©å¤šæ¬¡'],
                reference: 'Li X, et al. Tea consumption and risk of stroke in Chinese adults: a prospective cohort study of 0.5 million men and women. Lancet Public Health. 2020;5(1):e25-e33.',
                doi: 'https://doi.org/10.1016/S2468-2667(19)30227-7'
            },
            'milk': {
                benefits: [0, 5, 12, 17],
                labels: ['ä»ä¸', 'å¶å°”', 'æ¯å¤©1ä»½', 'æ¯å¤©2ä»½+'],
                reference: 'Guo J, et al. Milk and dairy consumption and risk of cardiovascular diseases and all-cause mortality: dose-response meta-analysis of prospective cohort studies. Eur J Epidemiol. 2017;32(4):269-287.',
                doi: 'https://doi.org/10.1007/s10654-017-0243-1'
            },
            'no-alcohol': {
                benefits: [0, 10, 25, 40, 50],
                labels: ['æ¯å¤©å–', 'ç»å¸¸å–', 'å¶å°”å–', 'å¾ˆå°‘å–', 'å®Œå…¨æˆ’é…’'],
                reference: 'Wood AM, et al. Risk thresholds for alcohol consumption: combined analysis of individual-participant data for 599 912 current drinkers. Lancet. 2018;391(10129):1513-1523.',
                doi: 'https://doi.org/10.1016/S0140-6736(18)30134-X'
            },
            'racquet-sports': {
                benefits: [0, 10, 25, 35, 45, 47],
                labels: ['ä»ä¸', 'å¾ˆå°‘', 'æ¯æœˆ1-2æ¬¡', 'æ¯å‘¨1æ¬¡', 'æ¯å‘¨2æ¬¡', 'æ¯å‘¨3æ¬¡+'],
                reference: 'Oja P, et al. Associations of specific types of sports and exercise with all-cause and cardiovascular-disease mortality: a cohort study of 80 306 British adults. Br J Sports Med. 2017;51(10):812-817.',
                doi: 'https://doi.org/10.1136/bjsports-2016-096822'
            },
            'vigorous-exercise': {
                benefits: [0, 5, 10, 16, 25, 35, 40, 40],
                labels: ['ä»ä¸', 'å¾ˆå°‘', 'æ¯å‘¨1æ¬¡', 'æ¯å‘¨2-3æ¬¡', 'æ¯å‘¨4-5æ¬¡', 'æ¯å‘¨6æ¬¡', 'æ¯å¤©', 'æ¯å¤©å¤šæ¬¡'],
                reference: 'Stamatakis E, et al. Association of wearable device-measured vigorous intermittent lifestyle physical activity with mortality. Nat Med. 2022;28(12):2521-2529.',
                doi: 'https://doi.org/10.1038/s41591-022-02100-x'
            },
            'walking': {
                benefits: [0, 10, 25, 40, 50],
                labels: ['<2000æ­¥', '2000-5000æ­¥', '5000-7000æ­¥', '7000-10000æ­¥', '10000æ­¥+'],
                reference: 'Paluch AE, et al. Daily steps and all-cause mortality: a meta-analysis of 15 international cohorts. Lancet Public Health. 2022;7(3):e219-e228.',
                doi: 'https://doi.org/10.1016/S2468-2667(21)00302-9'
            },
            'sleep': {
                benefits: [0, 5, 10, 15, 20],
                labels: ['å¾ˆå·®(<5h)', 'ä¸å¥½(5-6h)', 'ä¸€èˆ¬(6-7h)', 'è‰¯å¥½(7-8h)', 'ä¼˜ç§€(7-8hè§„å¾‹)'],
                reference: 'Cappuccio FP, et al. Sleep duration and all-cause mortality: a systematic review and meta-analysis of prospective studies. Sleep. 2010;33(5):585-592.',
                doi: 'https://doi.org/10.1093/sleep/33.5.585'
            },
            'brush-teeth': {
                benefits: [0, 8, 18, 25],
                labels: ['å¾ˆå°‘', 'æ¯å¤©1æ¬¡', 'æ¯å¤©2æ¬¡', 'æ¯å¤©2æ¬¡+æ¼±å£æ°´'],
                reference: 'Sen S, et al. Periodontal Disease, Regular Dental Care Use, and Incident Ischemic Stroke. Stroke. 2018;49(2):355-362.',
                doi: 'https://doi.org/10.1161/STROKEAHA.117.018990'
            },
            'sunlight': {
                benefits: [0, 10, 20, 30, 40],
                labels: ['ä»ä¸', 'å¾ˆå°‘', 'å¶å°”', 'ç»å¸¸', 'æ¯å¤©é€‚åº¦'],
                reference: 'Lindqvist PG, et al. Avoidance of sun exposure as a risk factor for major causes of death: a competing risk analysis of the Melanoma in Southern Sweden cohort. J Intern Med. 2016;280(4):375-387.',
                doi: 'https://doi.org/10.1111/joim.12496'
            },
            'no-smoking': {
                benefits: [0, 10, 25, 40, 50],
                labels: ['é‡åº¦å¸çƒŸ', 'è½»åº¦å¸çƒŸ', 'å¶å°”å¸çƒŸ', 'å·²æˆ’çƒŸ', 'ä»ä¸å¸çƒŸ'],
                reference: 'Jha P, et al. 21st-century hazards of smoking and benefits of cessation in the United States. N Engl J Med. 2013;368(4):341-350.',
                doi: 'https://doi.org/10.1056/NEJMsa1211128'
            },
            'weight-management': {
                benefits: [0, 15, 30, 45, 54],
                labels: ['è‚¥èƒ–', 'è¶…é‡', 'æ­£å¸¸åé‡', 'æ­£å¸¸', 'ç†æƒ³ä½“é‡'],
                reference: 'Aune D, et al. BMI and all cause mortality: systematic review and non-linear dose-response meta-analysis of 230 cohort studies. BMJ. 2016;353:i2156.',
                doi: 'https://doi.org/10.1136/bmj.i2156'
            }
        };

        const achievements = [
            { threshold: 50, message: "ğŸ¯ åˆçº§å¥åº·ç¨‹åºå‘˜" },
            { threshold: 100, message: "ğŸƒâ€â™‚ï¸ ä¸­çº§ç”Ÿå‘½ä¼˜åŒ–å¸ˆ" },
            { threshold: 200, message: "ğŸ’ª é«˜çº§å»¶å¯¿ä¸“å®¶" },
            { threshold: 300, message: "ğŸ§¬ ä¼ è¯´çº§é•¿å¯¿é»‘å®¢" },
            { threshold: 500, message: "ğŸ‘‘ ä¸æ­»ç¨‹åºå‘˜æˆå°±è§£é”ï¼" }
        ];

        const healthLevels = [
            { minScore: 0, maxScore: 49, level: "ğŸ› Bugä¿®å¤ä¸­", color: "#ff6b6b", description: "ç”Ÿå‘½ä»£ç éœ€è¦debug" },
            { minScore: 50, maxScore: 99, level: "ğŸŒ± ä»£ç å°ç™½", color: "#feca57", description: "å¥åº·ç¼–ç¨‹å…¥é—¨" },
            { minScore: 100, maxScore: 199, level: "ğŸ’» å…¨æ ˆå¥åº·å¸ˆ", color: "#48dbfb", description: "æŒæ¡å¥åº·æŠ€æœ¯æ ˆ" },
            { minScore: 200, maxScore: 299, level: "ğŸš€ ç”Ÿå‘½æ¶æ„å¸ˆ", color: "#ff9ff3", description: "è®¾è®¡äººç”Ÿç³»ç»Ÿæ¶æ„" },
            { minScore: 300, maxScore: 499, level: "ğŸ§  é•¿å¯¿ç®—æ³•å¤§å¸ˆ", color: "#54a0ff", description: "ä¼˜åŒ–ç”Ÿå‘½ç®—æ³•" },
            { minScore: 500, maxScore: 999, level: "ğŸ‘‘ ä¸æ­»ä»£ç ä¹‹ç¥", color: "#5f27cd", description: "ä¼ è¯´ä¸­çš„å­˜åœ¨" },
            { minScore: 1000, maxScore: 9999, level: "ğŸŒŸ æ°¸ç”ŸCTO", color: "#00d2d3", description: "æŒæ§ä¸€åˆ‡ç”Ÿå‘½é€»è¾‘" }
        ];

        function getHealthLevelInfo(score) {
            for (let level of healthLevels) {
                if (score >= level.minScore && score <= level.maxScore) {
                    return level;
                }
            }
            return healthLevels[0]; // é»˜è®¤è¿”å›ç¬¬ä¸€çº§
        }

        let lastAchievementIndex = -1;
        let hasShownSharePrompt = false;

        function updateResults() {
            let totalACMReduction = 0;
            let actionCount = 0;
            const benefits = [];

            Object.keys(actionData).forEach(action => {
                const slider = document.querySelector(`[data-action="${action}"]`);
                const value = parseInt(slider.value);
                const benefit = actionData[action].benefits[value];
                
                if (benefit > 0) {
                    benefits.push(benefit);
                    actionCount++;
                }
            });

            // ä½¿ç”¨é€’å‡æ•ˆåº”æ¨¡å‹ï¼Œè€Œä¸æ˜¯ç®€å•ç´¯åŠ 
            if (benefits.length > 0) {
                // æŒ‰æ•ˆç›Šä»å¤§åˆ°å°æ’åº
                benefits.sort((a, b) => b - a);
                
                // é€’å‡æƒé‡è®¡ç®—ï¼šç¬¬ä¸€ä¸ª100%ï¼Œç¬¬äºŒä¸ª80%ï¼Œç¬¬ä¸‰ä¸ª60%ï¼Œä»¥æ­¤ç±»æ¨
                benefits.forEach((benefit, index) => {
                    const weight = Math.max(0.2, 1 - index * 0.2); // æœ€ä½æƒé‡20%
                    totalACMReduction += benefit * weight;
                });
            }

            // ä½¿ç”¨é€’å‡ç³»æ•°çš„ç”Ÿå‘½å»¶é•¿è®¡ç®—ï¼Œé«˜ACMå€¼ä¸‹å¢é•¿æ”¾ç¼“ä½†ä¸ä¼šåœæ­¢
            const lifeExtension = Math.max(0, 
                totalACMReduction <= 100 ? 
                    totalACMReduction * 0.08 : // 0-100%: æ¯1%å¢åŠ 0.08å¹´
                    8 + (totalACMReduction - 100) * 0.04 // 100%+: æ¯1%å¢åŠ 0.04å¹´
            );
            
            const healthScore = Math.min(1000, totalACMReduction * 2 + actionCount * 10);

            const levelInfo = getHealthLevelInfo(healthScore);

            document.getElementById('acm-reduction').textContent = `${totalACMReduction.toFixed(1)}%`;
            document.getElementById('life-extension').textContent = `+${lifeExtension.toFixed(1)}`;
            document.getElementById('health-score').textContent = healthScore.toFixed(0);
            
            const healthLevelElement = document.getElementById('health-level');
            const levelDescElement = document.getElementById('level-description');
            const levelCardElement = document.getElementById('health-level-card');
            
            healthLevelElement.textContent = levelInfo.level;
            healthLevelElement.style.color = levelInfo.color;
            levelDescElement.textContent = levelInfo.description;
            levelCardElement.style.borderColor = levelInfo.color;
            levelCardElement.style.boxShadow = `0 0 20px ${levelInfo.color}40`;

            checkAchievements(healthScore);
            
            checkSharePrompt(healthScore);
        }

        function checkSharePrompt(score) {
            if (score >= 200 && !hasShownSharePrompt) {
                hasShownSharePrompt = true;
                setTimeout(() => {
                    showAchievement("ğŸ‰ å¤ªæ£’äº†ï¼è¦ä¸è¦åˆ†äº«ä¸€ä¸‹ä½ çš„å¥åº·æˆæœï¼Ÿ");
                    setTimeout(() => {
                        const shareBtn = document.querySelector('.share-btn');
                        shareBtn.style.animation = 'pulse 2s infinite';
                        setTimeout(() => {
                            shareBtn.style.animation = '';
                        }, 6000);
                    }, 2000);
                }, 1000);
            }
        }

        function checkAchievements(score) {
            for (let i = achievements.length - 1; i >= 0; i--) {
                if (score >= achievements[i].threshold && i > lastAchievementIndex) {
                    showAchievement(achievements[i].message);
                    lastAchievementIndex = i;
                    break;
                }
            }
        }

        function showAchievement(message) {
            const achievement = document.getElementById('achievement');
            
            // æå–emojiå’Œæ–‡æœ¬
            const emojiMatch = message.match(/^([\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}])/u);
            let emoji = emojiMatch ? emojiMatch[0] : 'ğŸ‰';
            let text = message.replace(emoji, '').trim();
            
            achievement.innerHTML = `<span class="achievement-icon">${emoji}</span>${text}`;
            achievement.classList.add('show');
            
            setTimeout(() => {
                achievement.classList.remove('show');
            }, 3000);
        }

        function initializeSliders() {
            Object.keys(actionData).forEach(action => {
                const slider = document.querySelector(`[data-action="${action}"]`);
                const label = document.getElementById(`${action}-label`);
                
                slider.addEventListener('input', function() {
                    const value = parseInt(this.value);
                    label.textContent = actionData[action].labels[value];
                    updateResults();
                });
                
                const initialValue = parseInt(slider.value);
                label.textContent = actionData[action].labels[initialValue];
            });
        }

        function initializeTooltips() {
            const tooltipIcons = document.querySelectorAll('.tooltip-icon');
            const referenceIcons = document.querySelectorAll('.reference-icon');
            
            tooltipIcons.forEach(icon => {
                icon.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const resultCard = this.closest('.result-card');
                    const isExpanded = resultCard.classList.contains('expanded');
                    
                    // æ”¶èµ·å…¶ä»–å·²å±•å¼€çš„å¡ç‰‡
                    document.querySelectorAll('.result-card.expanded').forEach(card => {
                        if (card !== resultCard) {
                            card.classList.remove('expanded');
                        }
                    });
                    
                    // åˆ‡æ¢å½“å‰å¡ç‰‡çš„å±•å¼€çŠ¶æ€
                    resultCard.classList.toggle('expanded');
                });
                
                icon.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        this.click();
                    }
                });
            });
            
            referenceIcons.forEach(icon => {
                icon.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    referenceIcons.forEach(other => {
                        if (other !== this) other.classList.remove('active');
                    });
                    this.classList.toggle('active');
                });
                
                icon.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        e.stopPropagation();
                        referenceIcons.forEach(other => {
                            if (other !== this) other.classList.remove('active');
                        });
                        this.classList.toggle('active');
                    }
                });
            });
            
            // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹æ—¶æ”¶èµ·æ‰€æœ‰å±•å¼€çš„å¡ç‰‡
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.result-card')) {
                    document.querySelectorAll('.result-card.expanded').forEach(card => {
                        card.classList.remove('expanded');
                    });
                }
                
                if (!e.target.closest('.reference-icon')) {
                    referenceIcons.forEach(icon => icon.classList.remove('active'));
                }
            });
        }

        function openShareModal() {
            updateShareData();
            document.getElementById('shareModal').classList.add('show');
        }

        function closeShareModal() {
            document.getElementById('shareModal').classList.remove('show');
        }

        function openAboutModal() {
            document.getElementById('aboutModal').classList.add('show');
        }

        function closeAboutModal() {
            document.getElementById('aboutModal').classList.remove('show');
        }

        // ç”Ÿæˆè¶…ç®€æ´çš„åˆ†äº«ID - ä½¿ç”¨config.jsä¸­çš„ç‰ˆæœ¬

        function generateQrCode() {
            const shareId = generateShareId();
            const shareUrl = `https://buff.meiyongxia.com?s=${shareId}`;
            
            // æ¸…ç©ºä¹‹å‰çš„äºŒç»´ç 
            const qrContainer = document.querySelector('#qr-code-container');
            const existingQr = qrContainer.querySelector('#qrcode');
            if (existingQr) {
                existingQr.remove();
            }
            
            // åˆ›å»ºäºŒç»´ç å®¹å™¨
            const qrDiv = document.createElement('div');
            qrDiv.id = 'qrcode';
            qrDiv.style.display = 'flex';
            qrDiv.style.justifyContent = 'center';
            qrDiv.style.marginBottom = '20px';
            
            // ä½¿ç”¨qrcodejsåº“ç”ŸæˆäºŒç»´ç 
            const qr = new QRCode(qrDiv, {
                text: shareUrl,
                width: 300,
                height: 300,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.M
            });
            
            // æ’å…¥äºŒç»´ç åˆ°é¡µé¢
            const img = qrContainer.querySelector('img');
            if (img) {
                img.parentNode.insertBefore(qrDiv, img);
                img.style.display = 'none';
            } else {
                qrContainer.insertBefore(qrDiv, qrContainer.firstChild);
            }
            
            // æ›´æ–°æ˜¾ç¤ºçš„åˆ†äº«URL
            document.querySelector('#qr-code-container p').innerHTML = `
                <strong>åˆ†äº«é“¾æ¥:</strong><br>
                <span style="color: #00ff41; font-size: 0.9em; word-break: break-all;">${shareUrl}</span><br><br>
                æ‰«æäºŒç»´ç æˆ–åˆ†äº«é“¾æ¥ï¼Œè®©æœ‹å‹æŸ¥çœ‹ä½ çš„å¥åº·æ•°æ®ï¼
            `;
        }
        
        function openQrModal() {
            generateQrCode();
            document.getElementById('qrModal').classList.add('show');
        }
        
        function closeQrModal() {
            document.getElementById('qrModal').classList.remove('show');
        }

        function loadDataFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            const shareId = urlParams.get('s');
            
            if (!shareId) return;
            
            const dataToLoad = decodeShareId(shareId);
            
            if (dataToLoad && Object.keys(dataToLoad).length > 0) {
                // é‡ç½®æ‰€æœ‰æ»‘å—åˆ°é»˜è®¤å€¼
                Object.keys(actionData).forEach(action => {
                    const slider = document.querySelector(`[data-action="${action}"]`);
                    if (slider) {
                        slider.value = 0;
                    }
                });
                
                // è®¾ç½®åˆ†äº«çš„æ•°æ®
                Object.keys(dataToLoad).forEach(action => {
                    const slider = document.querySelector(`[data-action="${action}"]`);
                    if (slider) {
                        slider.value = dataToLoad[action];
                    }
                });
                
                // æ›´æ–°æ‰€æœ‰æ»‘å—æ ‡ç­¾
                Object.keys(actionData).forEach(action => {
                    const slider = document.querySelector(`[data-action="${action}"]`);
                    const label = document.getElementById(`${action}-label`);
                    if (slider && label) {
                        const value = parseInt(slider.value);
                        label.textContent = actionData[action].labels[value];
                    }
                });
                
                updateResults();
                showAchievement("ğŸ”— å·²åŠ è½½åˆ†äº«æ•°æ®");
            }
        }

        function updateShareData() {
            const acm = document.getElementById('acm-reduction').textContent;
            const life = document.getElementById('life-extension').textContent;
            const score = parseInt(document.getElementById('health-score').textContent);
            const levelInfo = getHealthLevelInfo(score);

            document.getElementById('share-acm-new').textContent = acm;
            document.getElementById('share-life-new').textContent = life;
            document.getElementById('share-score-new').textContent = score;

            const levelDisplay = document.getElementById('share-level-display');
            levelDisplay.textContent = levelInfo.level;
            levelDisplay.style.color = levelInfo.color;

            const scorePercent = Math.min(score / 1000, 1) * 100;
            document.getElementById('share-gauge-bar').style.width = `${scorePercent}%`;
            document.getElementById('share-gauge-text').textContent = `${score} / 1000`;

            // æ›´æ–°åˆ†äº«URLæ˜¾ç¤º
            const shareId = generateShareId();
            const shareUrl = `https://buff.meiyongxia.com?s=${shareId}`;
            document.getElementById('share-url-display').textContent = shareUrl;

            const topHabitsContainer = document.getElementById('share-top-habits-new');
            const habits = [];
            Object.keys(actionData).forEach(action => {
                const slider = document.querySelector(`[data-action="${action}"]`);
                const value = parseInt(slider.value);
                const benefit = actionData[action].benefits[value];
                if (benefit > 0) {
                    habits.push({
                        name: getActionDisplayName(action),
                        benefit: benefit,
                        level: actionData[action].labels[value]
                    });
                }
            });
            habits.sort((a, b) => b.benefit - a.benefit);
            
            // æ˜¾ç¤ºæ‰€æœ‰æœ‰è®¾ç½®çš„ä¹ æƒ¯ï¼Œè€Œä¸æ˜¯åªæ˜¾ç¤ºå‰3ä¸ª
            const allHabits = habits;

            topHabitsContainer.innerHTML = allHabits.map(habit => `
                <div class="share-habit-item">
                    <div>
                        <span class="name">+ ${habit.name}</span>
                        <span class="level">- ${habit.level}</span>
                    </div>
                    <div class="benefit">-${habit.benefit.toFixed(1)}% ACM</div>
                </div>
            `).join('');
        }

        function getActionDisplayName(action) {
            const displayNames = {
                'white-meat': 'ç™½è‚‰æ‘„å…¥',
                'vegetables-fruits': 'è”¬æœæ‘„å…¥',
                'nuts': 'åšæœæ‘„å…¥',
                'spicy-food': 'è¾›è¾£é£Ÿç‰©',
                'avoid-processed': 'é¿å…è¶…åŠ å·¥é£Ÿç‰©',
                'coffee': 'å’–å•¡',
                'tea': 'èŒ¶',
                'milk': 'ç‰›å¥¶',
                'no-alcohol': 'æˆ’é…’',
                'racquet-sports': 'æŒ¥æ‹è¿åŠ¨',
                'vigorous-exercise': 'å‰§çƒˆè¿åŠ¨',
                'walking': 'æ­¥è¡Œ',
                'sleep': 'ç¡çœ è´¨é‡',
                'brush-teeth': 'åˆ·ç‰™',
                'sunlight': 'æ™’å¤ªé˜³',
                'no-smoking': 'æˆ’çƒŸ',
                'weight-management': 'ä½“é‡ç®¡ç†'
            };
            return displayNames[action] || action;
        }

        function getHealthLevel(score) {
            const levelInfo = getHealthLevelInfo(score);
            return levelInfo.level;
        }

        function generateShareText() {
            const acm = document.getElementById('acm-reduction').textContent;
            const life = document.getElementById('life-extension').textContent;
            const score = document.getElementById('health-score').textContent;
            const level = getHealthLevel(parseInt(score));
            
            const shareId = generateShareId();
            const shareUrl = `https://buff.meiyongxia.com?s=${shareId}`;
            
            return `ğŸ§¬ æˆ‘é€šè¿‡ç§‘å­¦æ–¹æ³•å»¶é•¿äº†${life}å¹´å¯¿å‘½ï¼
ğŸ“Š ç”Ÿå­˜ä¼˜åŠ¿æå‡ï¼š${acm}
ğŸ† å¥åº·ç­‰çº§ï¼š${level}
ğŸ”¬ åŸºäºé¡¶çº§æœŸåˆŠè®ºæ–‡çš„å¥åº·ä¼˜åŒ–

ç¨‹åºå‘˜ä¸æ˜¯åªèƒ½996ï¼Œä¹Ÿèƒ½å¥åº·é•¿å¯¿ï¼

${shareUrl}
#ç¨‹åºå‘˜å¥åº· #ç§‘å­¦å»¶å¯¿ #å¥åº·ä¼˜åŒ–`;
        }

        function shareToWeibo() {
            const text = generateShareText();
            const url = 'https://buff.meiyongxia.com';
            const weiboUrl = `https://service.weibo.com/share/share.php?url=${encodeURIComponent(url)}&title=${encodeURIComponent(text)}`;
            window.open(weiboUrl, '_blank');
        }

        function shareToTwitter() {
            const text = generateShareText().replace(/#ç¨‹åºå‘˜å¥åº· #ç§‘å­¦å»¶å¯¿ #å¥åº·ä¼˜åŒ–/, '#ProgrammerHealth #Longevity #HealthOptimization');
            const url = 'https://buff.meiyongxia.com';
            const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`;
            window.open(twitterUrl, '_blank');
        }

        function copyShareUrl() {
            const shareId = generateShareId();
            const shareUrl = `https://buff.meiyongxia.com?s=${shareId}`;
            
            navigator.clipboard.writeText(shareUrl).then(() => {
                showAchievement("ğŸ”— åˆ†äº«é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼");
            }).catch(() => {
                const textArea = document.createElement('textarea');
                textArea.value = shareUrl;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showAchievement("ğŸ”— åˆ†äº«é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼");
            });
        }

        function copyShareText() {
            const text = generateShareText();
            navigator.clipboard.writeText(text).then(() => {
                showAchievement("ğŸ“‹ åˆ†äº«æ–‡æ¡ˆå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼");
            }).catch(() => {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showAchievement("ğŸ“‹ åˆ†äº«æ–‡æ¡ˆå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼");
            });
        }

        function generateShareImage() {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const font = "'Microsoft YaHei', 'Monaco', 'Menlo', 'Ubuntu Mono', monospace";

            canvas.width = 800;
            
            function drawGlowText(text, x, y, size, color, glowColor, blur) {
                ctx.font = `${size}px ${font}`;
                ctx.shadowColor = glowColor;
                ctx.shadowBlur = blur;
                ctx.fillStyle = color;
                ctx.fillText(text, x, y);
                ctx.shadowBlur = 0;
            }

            function drawGrid(step, color) {
                ctx.strokeStyle = color;
                ctx.lineWidth = 0.5;
                for (let i = 0; i < canvas.width; i += step) {
                    ctx.beginPath();
                    ctx.moveTo(i, 0);
                    ctx.lineTo(i, canvas.height);
                    ctx.stroke();
                }
                for (let j = 0; j < canvas.height; j += step) {
                    ctx.beginPath();
                    ctx.moveTo(0, j);
                    ctx.lineTo(canvas.width, j);
                    ctx.stroke();
                }
            }

            // ç”Ÿæˆåˆ†äº«URLç”¨äºäºŒç»´ç ï¼Œä¸»é¡µURLç”¨äºæ˜æ–‡æ˜¾ç¤º
            const shareId = generateShareId();
            const qrShareUrl = `https://buff.meiyongxia.com?s=${shareId}`;
            const displayUrl = `https://buff.meiyongxia.com`;

            // ç»˜åˆ¶èƒŒæ™¯
            ctx.fillStyle = '#0D1117';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            drawGrid(20, 'rgba(0, 255, 0, 0.05)');

            // ç»˜åˆ¶è¾¹æ¡†
            ctx.strokeStyle = '#00ff41';
            ctx.lineWidth = 4;
            ctx.strokeRect(2, 2, canvas.width - 4, canvas.height - 4);

            // æ ‡é¢˜
            ctx.textAlign = 'center';
            drawGlowText('// å¥åº·æŠ¥å‘Š.LOG', canvas.width / 2, 80, 36, '#00ff41', '#00ff41', 15);
            ctx.font = `18px ${font}`;
            ctx.fillStyle = '#888';
            ctx.fillText('ç¨‹åºå‘˜å»¶å¯¿æŒ‡å—', canvas.width / 2, 120);
            
            ctx.fillStyle = '#00ff41';
            ctx.font = `bold 20px ${font}`;
            ctx.textAlign = 'center';
            ctx.fillText('ğŸ† æˆ‘æˆåŠŸhackäº†è‡ªå·±çš„ç”Ÿå‘½ä»£ç ï¼', canvas.width / 2, 160);

            // è·å–æ•°æ®
            const acm = document.getElementById('acm-reduction').textContent;
            const life = document.getElementById('life-extension').textContent;
            const score = parseInt(document.getElementById('health-score').textContent);
            const level = document.getElementById('health-level').textContent;
            const levelInfo = getHealthLevelInfo(score);

            // ç»Ÿè®¡æ•°æ®
            const stats = [
                { icon: 'ğŸ›¡ï¸', label: 'ç”Ÿå­˜ä¼˜åŠ¿æå‡', value: acm },
                { icon: 'â¤ï¸', label: 'å¯¿å‘½å¢åŠ ', value: life },
                { icon: 'ğŸ†', label: 'å¥åº·è¯„åˆ†', value: score }
            ];

            stats.forEach((stat, index) => {
                const x = (canvas.width / 3) * (index + 0.5);
                ctx.font = `48px ${font}`;
                ctx.fillStyle = '#fff';
                ctx.fillText(stat.icon, x, 230);

                ctx.font = `bold 36px ${font}`;
                ctx.fillStyle = '#00ff41';
                ctx.fillText(stat.value, x, 280);

                ctx.font = `18px ${font}`;
                ctx.fillStyle = '#ccc';
                ctx.fillText(stat.label, x, 310);
            });

            // ç­‰çº§æ˜¾ç¤º
            ctx.textAlign = 'center';
            drawGlowText(level, canvas.width / 2, 390, 40, levelInfo.color, levelInfo.color, 15);
            
            // è¿›åº¦æ¡
            const gaugeWidth = 500;
            const gaugeX = (canvas.width - gaugeWidth) / 2;
            const scorePercent = Math.min(score / 1000, 1);

            ctx.fillStyle = 'rgba(0, 255, 0, 0.1)';
            ctx.fillRect(gaugeX, 430, gaugeWidth, 30);
            
            const gradient = ctx.createLinearGradient(gaugeX, 0, gaugeX + gaugeWidth, 0);
            gradient.addColorStop(0, '#5f27cd');
            gradient.addColorStop(0.5, '#00d2d3');
            gradient.addColorStop(1, '#00ff41');
            ctx.fillStyle = gradient;
            ctx.fillRect(gaugeX, 430, gaugeWidth * scorePercent, 30);

            ctx.strokeStyle = '#00ff41';
            ctx.lineWidth = 2;
            ctx.strokeRect(gaugeX, 430, gaugeWidth, 30);
            
            ctx.fillStyle = '#fff';
            ctx.font = `bold 16px ${font}`;
            ctx.textAlign = 'right';
            ctx.fillText(`${score} / 1000`, gaugeX + gaugeWidth - 10, 452);

            // æ ¸å¿ƒå¥åº·ä¹ æƒ¯ - æ˜¾ç¤ºæ‰€æœ‰æœ‰è®¾ç½®çš„ä¹ æƒ¯
            ctx.textAlign = 'left';
            drawGlowText('// æ ¸å¿ƒå¥åº·ä¹ æƒ¯', 50, 520, 24, '#00ff41', '#00ff41', 10);

            const habits = [];
            Object.keys(actionData).forEach(action => {
                const slider = document.querySelector(`[data-action="${action}"]`);
                const value = parseInt(slider.value);
                const benefit = actionData[action].benefits[value];
                if (benefit > 0) {
                    habits.push({
                        name: getActionDisplayName(action),
                        benefit: benefit,
                        level: actionData[action].labels[value]
                    });
                }
            });
            habits.sort((a, b) => b.benefit - a.benefit);
            
            // æ˜¾ç¤ºæ‰€æœ‰æœ‰è®¾ç½®çš„ä¹ æƒ¯ï¼Œè€Œä¸æ˜¯åªæ˜¾ç¤ºå‰6ä¸ª
            const allHabits = habits;
            
            allHabits.forEach((habit, index) => {
                const y = 580 + index * 60;
                ctx.fillStyle = 'rgba(0, 255, 0, 0.05)';
                ctx.fillRect(50, y - 30, canvas.width - 100, 60);
                
                ctx.fillStyle = '#00ff41';
                ctx.fillRect(50, y - 30, 5, 60);

                ctx.font = `bold 20px ${font}`;
                ctx.fillStyle = '#fff';
                ctx.fillText(`+ ${habit.name}`, 70, y);

                ctx.font = `16px ${font}`;
                ctx.fillStyle = '#ccc';
                ctx.fillText(`  - ${habit.level}`, 70, y + 25);

                ctx.textAlign = 'right';
                drawGlowText(`-${habit.benefit.toFixed(1)}% ACM`, canvas.width - 70, y + 10, 24, '#ffa500', '#ffa500', 10);
                ctx.textAlign = 'left';
            });

            // è®¾ç½®æœ€ç»ˆç”»å¸ƒé«˜åº¦
            canvas.height = dynamicHeight;
            
            // é‡æ–°ç»˜åˆ¶èƒŒæ™¯ã€ç½‘æ ¼å’Œè¾¹æ¡†ä»¥åŒ¹é…æ–°é«˜åº¦
            ctx.fillStyle = '#0D1117';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            drawGrid(20, 'rgba(0, 255, 0, 0.05)');
            
            ctx.strokeStyle = '#00ff41';
            ctx.lineWidth = 4;
            ctx.strokeRect(2, 2, canvas.width - 4, canvas.height - 4);

            // åº•éƒ¨ä¿¡æ¯å’ŒäºŒç»´ç åŒºåŸŸ - å±…ä¸­å¸ƒå±€
            const bottomY = dynamicHeight - 200; // è°ƒæ•´åº•éƒ¨ç©ºé—´
            
            ctx.textAlign = 'center';
            ctx.font = `16px ${font}`;
            ctx.fillStyle = '#888';
            ctx.fillText('åŸºäºé¡¶çº§æœŸåˆŠè®ºæ–‡çš„å¥åº·ä¼˜åŒ–', canvas.width / 2, bottomY);
            
            // ä½¿ç”¨qrcodejsåº“ç”ŸæˆäºŒç»´ç 
            const qrSize = 100; // ç¨å¾®å‡å°äºŒç»´ç å°ºå¯¸ä¸ºé“¾æ¥ç•™æ›´å¤šç©ºé—´
            
            // åˆ›å»ºä¸´æ—¶çš„äºŒç»´ç å®¹å™¨
            const tempDiv = document.createElement('div');
            tempDiv.style.position = 'absolute';
            tempDiv.style.left = '-9999px';
            tempDiv.style.top = '-9999px';
            document.body.appendChild(tempDiv);
            
            try {
                const qr = new QRCode(tempDiv, {
                    text: qrShareUrl,
                    width: qrSize,
                    height: qrSize,
                    colorDark: "#000000",
                    colorLight: "#ffffff",
                    correctLevel: QRCode.CorrectLevel.M
                });
                
                // ç­‰å¾…äºŒç»´ç ç”Ÿæˆå®Œæˆ
                setTimeout(() => {
                    const qrImg = tempDiv.querySelector('img');
                    if (qrImg && qrImg.complete) {
                        // äºŒç»´ç å±…ä¸­æ˜¾ç¤º
                        const qrX = (canvas.width - qrSize) / 2;
                        const qrY = bottomY + 40;
                        
                        // ç»˜åˆ¶äºŒç»´ç èƒŒæ™¯
                        ctx.fillStyle = '#fff';
                        ctx.fillRect(qrX - 10, qrY - 10, qrSize + 20, qrSize + 20);
                        
                        // ç»˜åˆ¶äºŒç»´ç è¾¹æ¡†
                        ctx.strokeStyle = '#00ff41';
                        ctx.lineWidth = 2;
                        ctx.strokeRect(qrX - 10, qrY - 10, qrSize + 20, qrSize + 20);
                        
                        // ç»˜åˆ¶äºŒç»´ç 
                        ctx.drawImage(qrImg, qrX, qrY, qrSize, qrSize);
                        
                        // åœ¨äºŒç»´ç ä¸‹æ–¹å±…ä¸­æ˜¾ç¤ºé“¾æ¥ï¼Œç®€æ´è®¾è®¡
                        ctx.textAlign = 'center';
                        ctx.font = `14px ${font}`;
                        ctx.fillStyle = '#00ff41';
                        
                        // è®¡ç®—é“¾æ¥ä½ç½®ï¼Œç¡®ä¿åœ¨å›¾ç‰‡èŒƒå›´å†…
                        const linkY = qrY + qrSize + 25;
                        // æ˜¾ç¤ºä¸»é¡µé“¾æ¥
                        ctx.fillText(displayUrl, canvas.width / 2, linkY);
                        
                        // åœ¨åº•éƒ¨æ·»åŠ Meiyongxiaå­—æ ·
                        ctx.textAlign = 'center';
                        ctx.font = `10px ${font}`;
                        ctx.fillStyle = '#666';
                        ctx.fillText('Meiyongxia', canvas.width / 2, linkY + 50);
                        
                        // æ¸…ç†ä¸´æ—¶å®¹å™¨
                        document.body.removeChild(tempDiv);
                        
                        // å¯¼å‡ºå›¾ç‰‡
                        canvas.toBlob(function(blob) {
                            const url = URL.createObjectURL(blob);
                            const a = document.createElement('a');
                            a.href = url;
                            a.download = `health_report-${new Date().toISOString().slice(0, 10)}.png`;
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                            URL.revokeObjectURL(url);
                            showAchievement("ğŸ“¸ å¥åº·æŠ¥å‘Šå·²ç”Ÿæˆå¹¶ä¸‹è½½ï¼");
                        }, 'image/png');
                    } else {
                        // å¦‚æœäºŒç»´ç ç”Ÿæˆå¤±è´¥ï¼Œé™çº§å¤„ç†
                        document.body.removeChild(tempDiv);
                        fallbackExport();
                    }
                }, 500);
                
            } catch (error) {
                console.error('QR code generation failed:', error);
                document.body.removeChild(tempDiv);
                fallbackExport();
            }
            
            function fallbackExport() {
                // é™çº§ï¼šä¸åŒ…å«äºŒç»´ç çš„å›¾ç‰‡ï¼Œåªæ˜¾ç¤ºé“¾æ¥
                ctx.textAlign = 'center';
                ctx.font = `16px ${font}`;
                ctx.fillStyle = '#00ff41';
                
                const linkY = bottomY + 60;
                // æ˜¾ç¤ºä¸»é¡µé“¾æ¥
                ctx.fillText(displayUrl, canvas.width / 2, linkY);
                
                // åœ¨åº•éƒ¨æ·»åŠ Meiyongxiaå­—æ ·
                ctx.textAlign = 'center';
                ctx.font = `10px ${font}`;
                ctx.fillStyle = '#666';
                ctx.fillText('Meiyongxia', canvas.width / 2, linkY + 50);
                
                canvas.toBlob(function(blob) {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `health_report-${new Date().toISOString().slice(0, 10)}.png`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    showAchievement("ğŸ“¸ å¥åº·æŠ¥å‘Šå·²ç”Ÿæˆå¹¶ä¸‹è½½ï¼");
                }, 'image/png');
            }
        }

        document.addEventListener('click', function(e) {
            const shareModal = document.getElementById('shareModal');
            if (e.target === shareModal) {
                closeShareModal();
            }
            const aboutModal = document.getElementById('aboutModal');
            if (e.target === aboutModal) {
                closeAboutModal();
            }
            const qrModal = document.getElementById('qrModal');
            if (e.target === qrModal) {
                closeQrModal();
            }
        });

        document.addEventListener('DOMContentLoaded', function() {
            initializeSliders();
            initializeTooltips();
            updateResults();
            loadDataFromUrl(); // Load data on page load
            document.getElementById('copyright-year').textContent = new Date().getFullYear();
            
            setTimeout(() => {
                showAchievement("ğŸš€ æ¬¢è¿ä½¿ç”¨ç¨‹åºå‘˜å»¶å¯¿è®¡ç®—å™¨ï¼");
            }, 1000);
        });
    </script>
</body>
</html>
