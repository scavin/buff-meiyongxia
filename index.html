<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Á®ãÂ∫èÂëòÂª∂ÂØøËÆ°ÁÆóÂô® | Programmer Longevity Calculator</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üß¨</text></svg>">
    <script src="config.js"></script>
    <script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a1a 100%);
            color: #00ff00;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #00ff00;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 0 30px rgba(0, 255, 0, 0.3);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            border-bottom: 2px solid #00ff00;
            padding-bottom: 20px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(0, 255, 0, 0.8);
        }

        .header .subtitle {
            color: #888;
            font-size: 1.1em;
        }

        .results {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            background: rgba(12, 12, 12, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid #00ff00;
            box-shadow: 0 2px 20px rgba(0, 255, 0, 0.3);
            padding: 15px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
        }

        .results-spacer {
            height: 200px; /* ‰∏∫Âõ∫ÂÆöÁªìÊûúÂå∫ÂüüÈ¢ÑÁïôÁ©∫Èó¥ */
        }

        .result-card {
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid #00ff00;
            border-radius: 8px;
            padding: 15px 10px;
            text-align: center;
            transition: all 0.3s ease;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        .result-card:hover {
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
            transform: translateY(-2px);
        }

        .result-value {
            font-size: 2.2em;
            font-weight: bold;
            color: #00ff41;
            text-shadow: 0 0 15px rgba(0, 255, 65, 0.8);
            line-height: 1.1;
        }

        #health-level {
            font-size: 1.4em !important;
            line-height: 1.2;
        }

        .result-label {
            font-size: 1em;
            margin-top: 8px;
            color: #ccc;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            transition: all 0.3s ease;
        }
        
        .result-card.expanded .result-label {
            flex-direction: column;
            gap: 10px;
        }

        .level-description {
            font-size: 0.75em;
            color: #888;
            margin-top: 5px;
            font-style: italic;
            line-height: 1.3;
        }

        .tooltip-icon {
            color: #00ff41;
            cursor: pointer;
            font-size: 0.9em;
            user-select: none;
            transition: all 0.3s ease;
            padding: 4px;
            border-radius: 50%;
        }

        .tooltip-icon:hover {
            color: #ffffff;
            background: rgba(0, 255, 65, 0.2);
            text-shadow: 0 0 10px rgba(0, 255, 65, 0.8);
        }

        .tooltip-content {
            display: none;
            background: rgba(0, 255, 0, 0.05);
            border: 1px solid #00ff00;
            border-radius: 8px;
            padding: 12px;
            margin-top: 8px;
            font-size: 0.8em;
            line-height: 1.4;
            color: #ccc;
            max-width: 100%;
            animation: fadeIn 0.3s ease;
        }
        
        .result-card.expanded .tooltip-content {
            display: block;
        }
        
        .result-card.expanded {
            transform: scale(1.05);
            min-height: auto;
            padding: 20px 15px;
            z-index: 10;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
        }

        .category {
            background: rgba(0, 255, 0, 0.05);
            border: 1px solid #00ff00;
            border-radius: 10px;
            padding: 25px;
        }

        .category h3 {
            color: #00ff41;
            font-size: 1.5em;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 0 0 10px rgba(0, 255, 65, 0.6);
        }

        .action-item {
            margin-bottom: 25px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            border-left: 4px solid #00ff00;
        }

        .action-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .action-name {
            font-weight: bold;
            color: #00ff41;
            flex-grow: 1;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .reference-icon {
            color: #888;
            cursor: pointer;
            font-size: 0.8em;
            user-select: none;
            transition: all 0.3s ease;
            position: relative;
        }

        .reference-icon:hover {
            color: #00ff41;
            text-shadow: 0 0 5px rgba(0, 255, 65, 0.6);
        }

        .reference-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.95);
            color: #ffffff;
            padding: 12px;
            border-radius: 6px;
            border: 1px solid #00ff00;
            font-size: 0.75em;
            line-height: 1.3;
            width: 350px;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.4);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1001;
            pointer-events: none;
            margin-bottom: 12px;
        }

        .reference-tooltip::before {
            content: '';
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            height: 12px;
            background: transparent;
        }

        .reference-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 5px solid transparent;
            border-top-color: #00ff00;
        }

        .reference-icon:hover .reference-tooltip,
        .reference-icon:focus .reference-tooltip,
        .reference-icon.active .reference-tooltip {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }

        .reference-tooltip:hover {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }

        .reference-link {
            color: #00ff41;
            text-decoration: none;
            display: block;
            margin-top: 8px;
            padding: 4px 8px;
            border: 1px solid #00ff41;
            border-radius: 4px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .reference-link:hover {
            background: #00ff41;
            color: #000;
        }

        .action-benefit {
            color: #ffa500;
            font-size: 0.9em;
            margin-left: 10px;
        }

        .action-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 10px;
        }

        .slider {
            flex-grow: 1;
            -webkit-appearance: none;
            height: 8px;
            border-radius: 4px;
            background: #333;
            outline: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #00ff00;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.8);
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #00ff00;
            cursor: pointer;
            border: none;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.8);
        }

        .frequency-label {
            min-width: 120px;
            text-align: center;
            color: #ccc;
            font-size: 0.9em;
        }

        .action-description {
            font-size: 0.85em;
            color: #999;
            margin-top: 8px;
            line-height: 1.4;
        }

        .achievement {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: linear-gradient(135deg, rgba(0, 255, 0, 0.95), rgba(0, 204, 0, 0.95));
            color: #000;
            padding: 12px 20px;
            border-radius: 25px;
            font-weight: bold;
            transition: all 0.5s ease;
            z-index: 102;
            border: 2px solid #00ff00;
            box-shadow: 0 4px 20px rgba(0, 255, 0, 0.6);
            backdrop-filter: blur(10px);
            font-size: 0.9em;
            text-align: center;
            max-width: 300px;
            opacity: 0;
            pointer-events: none;
        }

        .achievement.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
            pointer-events: auto;
        }

        .achievement::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #00ff00, #00cc00, #00aa00, #00ff00);
            background-size: 400% 400%;
            border-radius: 27px;
            z-index: -1;
            animation: gradientMove 3s ease infinite;
        }

        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* ÁªôÊàêÂ∞±ÈÄöÁü•Ê∑ªÂä†ÂõæÊ†áÂä®Áîª */
        .achievement-icon {
            display: inline-block;
            margin-right: 6px;
            animation: bounce 0.6s ease-in-out;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .warning {
            background: rgba(255, 0, 0, 0.1);
            border: 1px solid #ff0000;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            color: #ff6666;
            text-align: center;
        }

        .code-style {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            background: rgba(0, 0, 0, 0.5);
            padding: 2px 6px;
            border-radius: 4px;
            color: #00ff41;
        }

        .share-container {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 101;
        }

        .share-btn {
            background: linear-gradient(135deg, #2196F3, #1976D2);
            color: #fff;
            border: 2px solid #2196F3;
            padding: 12px 20px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.4);
        }

        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(33, 150, 243, 0.6);
            background: linear-gradient(135deg, #1976D2, #1565C0);
            border-color: #1976D2;
        }

        .share-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            overflow-y: auto;
            padding: 20px;
        }

        .share-modal.show {
            display: flex;
        }

        .share-card {
            font-family: 'Microsoft YaHei', 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            background: #0D1117;
            border: 4px solid #00ff41;
            padding: 20px;
            max-width: 600px;
            width: 100%;
            position: relative;
            background-image: 
                linear-gradient(rgba(0, 255, 0, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 0, 0.05) 1px, transparent 1px);
            background-size: 20px 20px;
            box-sizing: border-box;
            overflow: hidden;
        }
        
        .close-modal {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            color: #888;
            font-size: 2em;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .close-modal:hover {
            color: #00ff41;
            transform: rotate(90deg);
        }

        .share-header-new {
            text-align: center;
            margin-bottom: 20px;
        }

        .share-title-new {
            font-size: 2em;
            color: #00ff41;
            text-shadow: 0 0 15px #00ff41;
            margin-bottom: 10px;
        }

        .share-subtitle-new {
            font-size: 1em;
            color: #888;
        }
        
        .share-inspirational-text {
            font-size: 1.1em;
            font-weight: bold;
            color: #00ff41;
            text-align: center;
            margin: 20px 0;
        }

        .share-stats-new {
            display: flex;
            justify-content: space-around;
            text-align: center;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 20px;
        }

        .share-stat-new .icon {
            font-size: 2.5em;
        }
        
        .share-stat-new .value {
            font-size: 2em;
            font-weight: bold;
            color: #00ff41;
        }

        .share-stat-new .label {
            font-size: 0.9em;
            color: #ccc;
        }

        .share-level-container {
            text-align: center;
            margin: 30px 0;
        }

        #share-level-display {
            font-size: 2.2em;
            font-weight: bold;
            text-shadow: 0 0 15px currentColor;
        }

        .share-gauge-container {
            width: 80%;
            margin: 15px auto;
        }

        .share-gauge-background {
            background: rgba(0, 255, 0, 0.1);
            height: 20px;
            border: 1px solid #00ff41;
        }

        #share-gauge-bar {
            height: 100%;
            background: linear-gradient(90deg, #5f27cd, #00d2d3, #00ff41);
            transition: width 0.5s ease-out;
        }
        
        #share-gauge-text {
            text-align: right;
            color: #fff;
            font-size: 0.9em;
            margin-top: 5px;
        }

        .share-habits-container {
            margin-top: 30px;
        }

        .share-habits-title {
            font-size: 1.5em;
            color: #00ff41;
            text-shadow: 0 0 10px #00ff41;
            margin-bottom: 15px;
        }

        .share-habit-item {
            background: rgba(0, 255, 0, 0.05);
            border-left: 4px solid #00ff41;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .share-habit-item .name {
            font-weight: bold;
            color: #fff;
            font-size: 1.1em;
        }
        
        .share-habit-item .level {
            color: #ccc;
            font-size: 0.9em;
            margin-left: 10px;
        }

        .share-habit-item .benefit {
            font-size: 1.2em;
            font-weight: bold;
            color: #ffa500;
            text-shadow: 0 0 10px #ffa500;
        }

        .share-footer-new {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #333;
        }
        
        .share-footer-new p {
            margin: 5px 0;
            color: #888;
            font-size: 0.9em;
        }
        
        .share-footer-new .link {
            color: #00ff41;
            font-weight: bold;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 8px 12px;
            border: 1px solid #00ff41;
            border-radius: 4px;
            background: rgba(0, 255, 65, 0.1);
            margin-top: 10px;
            display: block;
            width: fit-content;
            max-width: 100%;
            margin-left: auto;
            margin-right: auto;
            word-break: break-all;
            text-align: center;
            overflow-wrap: break-word;
        }
        
        .share-footer-new .link:hover {
            background: rgba(0, 255, 65, 0.2);
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.3);
        }

        .share-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        .share-platform-btn {
            background: #333;
            color: #fff;
            border: 1px solid #00ff41;
            padding: 10px 18px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .share-platform-btn:hover {
            background: #00ff41;
            color: #000;
            box-shadow: 0 0 15px #00ff41;
        }

        .share-platform-btn.primary {
            background: linear-gradient(135deg, #00ff00, #00cc00);
            color: #000;
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 255, 0, 0.4);
        }
        .share-platform-btn.primary:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(0, 255, 0, 0.6);
        }
        .share-recommendation {
            text-align: center;
            font-size: 0.9em;
            color: #888;
            margin-bottom: 15px;
        }

        #qrModal .share-card {
            padding: 40px;
            text-align: center;
        }
        
        #qr-code-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        
        #qr-code-container #qrcode {
            border: 4px solid #00ff41;
            padding: 10px;
            background: #fff;
            border-radius: 8px;
        }
        
        #qr-code-container p {
            color: #ccc;
            font-size: 1.1em;
            word-break: break-all;
            overflow-wrap: break-word;
            max-width: 90%;
        }

        .footer-info {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            border-top: 1px solid #333;
            color: #666;
            font-size: 0.9em;
            margin-bottom: 100px; /* ‰∏∫ÊÇ¨ÊµÆÂàÜ‰∫´ÊåâÈíÆÁïôÁ©∫Èó¥ */
        }

        .about-link {
            cursor: pointer;
            text-decoration: underline;
            color: #00ff41;
        }
        .about-link:hover {
            text-shadow: 0 0 8px rgba(0, 255, 65, 0.6);
        }
        .about-content {
            padding: 10px 20px;
        }
        .about-content p {
            color: #ccc;
            font-size: 1.1em;
            margin-bottom: 15px;
            line-height: 1.8;
            text-align: left;
        }
        .about-content strong {
            color: #fff;
        }
        .about-content a {
            color: #00ff41;
            text-decoration: none;
            border-bottom: 1px dotted #00ff41;
            transition: all 0.3s ease;
        }
        .about-content a:hover {
            background: #00ff41;
            color: #000;
            border-bottom: 1px solid #00ff41;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                box-shadow: 0 5px 15px rgba(0, 255, 0, 0.4);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 8px 25px rgba(0, 255, 0, 0.8);
            }
            100% {
                transform: scale(1);
                box-shadow: 0 5px 15px rgba(0, 255, 0, 0.4);
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 0;
                padding-top: 10px;
            }
            
            .container {
                padding: 15px;
                margin: 0;
                max-width: 100%;
                box-sizing: border-box;
            }
            
            .results {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                padding: 10px;
            }
            
            .results-spacer {
                height: 180px;
            }
            
            .result-card {
                padding: 10px 8px;
                min-height: 70px;
            }
            
            .result-value {
                font-size: 1.6em;
            }
            
            #health-level {
                font-size: 1.1em !important;
            }
            
            .result-label {
                font-size: 0.8em;
                margin-top: 4px;
                gap: 4px;
            }
            
            .level-description {
                font-size: 0.7em;
                margin-top: 2px;
            }
            
            .share-container {
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                z-index: 101;
            }
            
            .share-btn {
                padding: 15px 25px;
                font-size: 1em;
                border-radius: 25px;
                box-shadow: 0 4px 20px rgba(33, 150, 243, 0.4);
            }
            
            .categories {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .category {
                padding: 15px;
                margin: 0;
                border-radius: 8px;
                overflow: hidden;
            }
            
            .header h1 {
                font-size: 1.6em;
                line-height: 1.2;
                margin-bottom: 8px;
            }
            
            .header .subtitle {
                font-size: 0.9em;
            }
            
            .header {
                margin-bottom: 20px;
                padding-bottom: 15px;
            }
            
            .action-item {
                margin-bottom: 20px;
                padding: 12px;
            }
            
            .action-controls {
                flex-direction: column;
                gap: 10px;
                margin-top: 10px;
            }
            
            .slider {
                width: 100%;
                height: 12px;
                margin: 10px 0;
            }
            
            .slider::-webkit-slider-thumb {
                width: 28px;
                height: 28px;
                margin-top: -10px;
            }
            
            .slider::-moz-range-thumb {
                width: 28px;
                height: 28px;
                border: 2px solid #00ff00;
                background: #00ff00;
            }
            
            .frequency-label {
                min-width: auto;
                width: 100%;
                text-align: center;
                font-size: 1em;
                padding: 8px;
                background: rgba(0, 255, 0, 0.1);
                border-radius: 4px;
                border: 1px solid rgba(0, 255, 0, 0.3);
            }
            
            .action-name {
                font-size: 1.1em;
                flex-wrap: wrap;
            }
            
            .action-benefit {
                font-size: 1em;
                margin-left: 0;
                margin-top: 5px;
            }
            
            .action-description {
                font-size: 0.9em;
                line-height: 1.5;
            }
            
            .tooltip-content {
                font-size: 0.75em;
                padding: 10px;
            }
            
            .reference-tooltip {
                width: 300px;
                font-size: 0.75em;
                padding: 10px;
            }
            
            .achievement {
                position: fixed;
                bottom: 100px;
                left: 50%;
                transform: translateX(-50%) translateY(120px);
                padding: 10px 16px;
                font-size: 0.85em;
                max-width: 280px;
                border-radius: 20px;
            }
            
            .achievement.show {
                transform: translateX(-50%) translateY(0);
            }
            
            .share-card {
                margin: 5px;
                padding: 15px;
                max-width: calc(100vw - 30px);
                max-height: calc(100vh - 40px);
                overflow-y: auto;
            }
            
            .share-footer-new .link {
                font-size: 0.8em;
                padding: 6px 10px;
                margin-top: 15px;
                word-break: break-all;
            }
            
            .share-stats-new {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .share-buttons {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
            
            .share-platform-btn {
                width: 100%;
                max-width: 250px;
                padding: 12px 20px;
                font-size: 1em;
            }
            
            .footer-info {
                margin-top: 20px;
                padding: 15px;
                font-size: 0.85em;
                margin-bottom: 100px; /* ‰∏∫ÊÇ¨ÊµÆÊåâÈíÆÁïôÁ©∫Èó¥ */
            }
        }
        
        /* Â¢ûÂº∫Ëß¶Êë∏‰ΩìÈ™å */
        @media (hover: none) and (pointer: coarse) {
            .slider::-webkit-slider-thumb {
                width: 32px;
                height: 32px;
                margin-top: -12px;
            }
            
            .slider::-moz-range-thumb {
                width: 32px;
                height: 32px;
            }
            
            .tooltip-icon,
            .reference-icon {
                font-size: 1.2em;
                padding: 8px;
                margin: -8px;
            }
            
            .action-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            
            .action-name {
                width: 100%;
            }
            
            .action-benefit {
                align-self: flex-start;
            }
            
            .share-btn {
                padding: 15px 20px;
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="results">
            <div class="result-card">
                <div class="result-value" id="acm-reduction">0%</div>
                <div class="result-label">
                    ÁîüÂ≠ò‰ºòÂäøÊèêÂçá
                    <span class="tooltip-icon" tabindex="0">‚ùì</span>
                    <div class="tooltip-content">
                        <strong>ÁîüÂ≠ò‰ºòÂäø (Survival Advantage)</strong><br>
                        ÈÄöËøáÂÅ•Â∫∑ÁîüÊ¥ªÊñπÂºèËé∑ÂæóÁöÑÁîüÂ≠òËÉΩÂäõÊèêÂçá„ÄÇÂü∫‰∫éÂÖ®Âõ†Ê≠ª‰∫°Áéá(ACM)Èôç‰ΩéËÆ°ÁÆóÔºåÂèçÊò†ÊÄª‰ΩìÂÅ•Â∫∑È£éÈô©ÁöÑÊîπÂñÑÁ®ãÂ∫¶„ÄÇ‰æãÂ¶ÇÔºö10%ÁöÑÁîüÂ≠ò‰ºòÂäøË°®Á§∫ÁîüÂ≠òËÉΩÂäõÁõ∏ÂØπÊèêÂçá10%„ÄÇ
                    </div>
                </div>
            </div>
            <div class="result-card">
                <div class="result-value" id="life-extension">+0</div>
                <div class="result-label">È¢ÑÊúüÂØøÂëΩÂ¢ûÂä†ÔºàÂπ¥Ôºâ</div>
            </div>
            <div class="result-card">
                <div class="result-value" id="health-score">0</div>
                <div class="result-label">
                    ÂÅ•Â∫∑ËØÑÂàÜ
                    <span class="tooltip-icon" tabindex="0">‚ùì</span>
                    <div class="tooltip-content">
                        <strong>ÂÅ•Â∫∑ËØÑÂàÜËÆ°ÁÆóÊñπÂºè</strong><br>
                        Âü∫‰∫éÊÇ®ÈÄâÊã©ÁöÑÂÅ•Â∫∑Ë°å‰∏∫ËÆ°ÁÆóÔºöËØÑÂàÜ = ACMÈôç‰Ωé% √ó 2 + Ë°å‰∏∫Êï∞Èáè √ó 10„ÄÇÂàÜÊï∞Ë∂äÈ´òË°®Á§∫ÂÅ•Â∫∑Ê∞¥Âπ≥Ë∂äÂ•ΩÔºåÊúÄÈ´ò1000ÂàÜ„ÄÇËøôÊòØ‰∏Ä‰∏™ÁªºÂêàËØÑ‰º∞ÊÇ®ÂΩìÂâçÁîüÊ¥ªÊñπÂºèÂÅ•Â∫∑Á®ãÂ∫¶ÁöÑÊåáÊ†á„ÄÇ
                    </div>
                </div>
            </div>
            <div class="result-card" id="health-level-card">
                <div class="result-value" id="health-level">üêõ Bug‰øÆÂ§ç‰∏≠</div>
                <div class="result-label">ÂΩìÂâçÁ≠âÁ∫ß</div>
                <div class="level-description" id="level-description">ÁîüÂëΩ‰ª£Á†ÅÈúÄË¶Ådebug</div>
            </div>
        </div>

        <div class="share-container">
            <button class="share-btn" onclick="openShareModal()">
                üöÄ ÂàÜ‰∫´ÊàêÊûú
            </button>
        </div>

        <div class="results-spacer"></div>

        <div class="header">
            <h1>üß¨ Á®ãÂ∫èÂëòÂª∂ÂØøËÆ°ÁÆóÂô® üíª</h1>
            <div class="subtitle">
                Âü∫‰∫éÁßëÂ≠¶Á†îÁ©∂ÁöÑÁîüÂëΩÂÄº‰ºòÂåñÂ∑•ÂÖ∑<br>
                <span class="code-style">while(alive) { optimize_health(); }</span>
            </div>
        </div>

        <div class="warning">
            ‚ö†Ô∏è <strong>ÂÖçË¥£Â£∞ÊòéÔºö</strong>Êú¨ËÆ°ÁÆóÂô®‰ªÖ‰æõÂ®±‰πêÔºå‰∏çÊûÑÊàêÂåªÂ≠¶Âª∫ËÆÆ„ÄÇËØ∑Âí®ËØ¢‰∏ì‰∏öÂåªÁîüËé∑ÂèñÂÅ•Â∫∑ÊåáÂØº„ÄÇ
        </div>

        <div class="categories">
            <div class="category">
                <h3>üçé È•ÆÈ£ü‰ºòÂåñ (Diet.optimize())</h3>
                
                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            ÁôΩËÇâÊëÑÂÖ•
                            <span class="reference-icon" tabindex="0">üìä
                                <div class="reference-tooltip">
                                    <strong>ÁßëÂ≠¶‰æùÊçÆÔºö</strong><br>
                                    Pan A, et al. Red meat consumption and mortality: results from 2 prospective cohort studies. Arch Intern Med. 2012.
                                    <a href="https://doi.org/10.1001/archinternmed.2011.2287" target="_blank" class="reference-link">üîó Êü•ÁúãÊñáÁåÆ</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-3% ~ -11% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="7" value="0" data-action="white-meat">
                        <span class="frequency-label" id="white-meat-label">‰ªé‰∏ç</span>
                    </div>
                    <div class="action-description">
                        Áî®È∏°ËÇâ„ÄÅÈ±ºËÇâÊõø‰ª£Á∫¢ËÇâÔºåÈôç‰ΩéÂøÉË°ÄÁÆ°ÁñæÁóÖÈ£éÈô©
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            Ëî¨ÊûúÊëÑÂÖ•
                            <span class="reference-icon" tabindex="0">üìä
                                <div class="reference-tooltip">
                                    <strong>ÁßëÂ≠¶‰æùÊçÆÔºö</strong><br>
                                    Wang X, et al. Fruit and vegetable consumption and mortality from all causes, cardiovascular disease, and cancer. BMJ. 2014.
                                    <a href="https://doi.org/10.1136/bmj.g4490" target="_blank" class="reference-link">üîó Êü•ÁúãÊñáÁåÆ</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-17% ~ -26% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="5" value="0" data-action="vegetables-fruits">
                        <span class="frequency-label" id="vegetables-fruits-label">ÂæàÂ∞ë</span>
                    </div>
                    <div class="action-description">
                        ÊØèÂ§©200gÊñ∞È≤úÊ∞¥ÊûúÔºåÂ§öÂêÉË•øÂÖ∞Ëä±Á≠âÂØåÂê´ÈªÑÈÖÆÁ±ªÈ£üÁâ©
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            ÂùöÊûúÊëÑÂÖ•
                            <span class="reference-icon" tabindex="0">üìä
                                <div class="reference-tooltip">
                                    <strong>ÁßëÂ≠¶‰æùÊçÆÔºö</strong><br>
                                    Bao Y, et al. Association of nut consumption with total and cause-specific mortality. N Engl J Med. 2013.
                                    <a href="https://doi.org/10.1056/NEJMoa1307352" target="_blank" class="reference-link">üîó Êü•ÁúãÊñáÁåÆ</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-4% ~ -27% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="7" value="0" data-action="nuts">
                        <span class="frequency-label" id="nuts-label">‰ªé‰∏ç</span>
                    </div>
                    <div class="action-description">
                        ÊØèÂë®5‰ªΩ‰ª•‰∏äÂùöÊûúÔºåÊØè‰ªΩ28gÔºåÊ†∏Ê°ÉÊïàÊûúÊúÄ‰Ω≥
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            ËæõËæ£È£üÁâ©
                            <span class="reference-icon" tabindex="0">üìä
                                <div class="reference-tooltip">
                                    <strong>ÁßëÂ≠¶‰æùÊçÆÔºö</strong><br>
                                    Lv J, et al. Consumption of spicy foods and total and cause specific mortality: population based cohort study. BMJ. 2015.
                                    <a href="https://doi.org/10.1136/bmj.h3942" target="_blank" class="reference-link">üîó Êü•ÁúãÊñáÁåÆ</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-23% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="7" value="0" data-action="spicy-food">
                        <span class="frequency-label" id="spicy-food-label">‰ªé‰∏ç</span>
                    </div>
                    <div class="action-description">
                        ÊØèÂë®ÂêÉËæ£>4Ê¨°ÔºåÂøÉË°ÄÁÆ°Ê≠ª‰∫°È£éÈô©Èôç‰Ωé34%
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            ÈÅøÂÖçË∂ÖÂä†Â∑•È£üÁâ©
                            <span class="reference-icon" tabindex="0">üìä
                                <div class="reference-tooltip">
                                    <strong>ÁßëÂ≠¶‰æùÊçÆÔºö</strong><br>
                                    Rico-Camp√† A, et al. Association between consumption of ultra-processed foods and all cause mortality: SUN prospective cohort study. BMJ. 2019.
                                    <a href="https://doi.org/10.1136/bmj.l1949" target="_blank" class="reference-link">üîó Êü•ÁúãÊñáÁåÆ</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-18% ~ -62% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="4" value="0" data-action="avoid-processed">
                        <span class="frequency-label" id="avoid-processed-label">ÁªèÂ∏∏ÂêÉ</span>
                    </div>
                    <div class="action-description">
                        ÂáèÂ∞ëËñØÁâá„ÄÅÊ±âÂ†°„ÄÅÊñπ‰æøÈù¢Á≠âË∂ÖÂä†Â∑•È£üÂìÅÊëÑÂÖ•
                    </div>
                </div>
            </div>

            <div class="category">
                <h3>ü•§ È•ÆÂìÅÈÄâÊã© (Drink.select())</h3>
                
                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            ÂíñÂï°
                            <span class="reference-icon" tabindex="0">üìä
                                <div class="reference-tooltip">
                                    <strong>ÁßëÂ≠¶‰æùÊçÆÔºö</strong><br>
                                    Ding M, et al. Association of Coffee Consumption With Total and Cause-Specific Mortality in 3 Large Prospective Cohorts. Circulation. 2015.
                                    <a href="https://doi.org/10.1161/CIRCULATIONAHA.115.017341" target="_blank" class="reference-link">üîó Êü•ÁúãÊñáÁåÆ</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-12% ~ -22% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="5" value="0" data-action="coffee">
                        <span class="frequency-label" id="coffee-label">‰ªé‰∏ç</span>
                    </div>
                    <div class="action-description">
                        ÊØèÂ§©3.5ÊùØÊúÄ‰Ω≥ÔºåÁ®ãÂ∫èÂëòÂøÖÂ§áÁîüÂ≠òÂ∑•ÂÖ∑
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            Ëå∂
                            <span class="reference-icon" tabindex="0">üìä
                                <div class="reference-tooltip">
                                    <strong>ÁßëÂ≠¶‰æùÊçÆÔºö</strong><br>
                                    Li X, et al. Tea consumption and risk of stroke in Chinese adults: a prospective cohort study of 0.5 million men and women. Lancet Public Health. 2020.
                                    <a href="https://doi.org/10.1016/S2468-2667(19)30227-7" target="_blank" class="reference-link">üîó Êü•ÁúãÊñáÁåÆ</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-8% ~ -15% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="5" value="0" data-action="tea">
                        <span class="frequency-label" id="tea-label">‰ªé‰∏ç</span>
                    </div>
                    <div class="action-description">
                        ÊØèÂë®3Ê¨°‰ª•‰∏äÔºåÈ¢ÑÊúüÂØøÂëΩÂ¢ûÂä†1.26Âπ¥
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            ÁâõÂ•∂
                            <span class="reference-icon" tabindex="0">üìä
                                <div class="reference-tooltip">
                                    <strong>ÁßëÂ≠¶‰æùÊçÆÔºö</strong><br>
                                    Guo J, et al. Milk and dairy consumption and risk of cardiovascular diseases and all-cause mortality: dose-response meta-analysis of prospective cohort studies. Eur J Epidemiol. 2017.
                                    <a href="https://doi.org/10.1007/s10654-017-0243-1" target="_blank" class="reference-link">üîó Êü•ÁúãÊñáÁåÆ</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-10% ~ -17% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="3" value="0" data-action="milk">
                        <span class="frequency-label" id="milk-label">‰ªé‰∏ç</span>
                    </div>
                    <div class="action-description">
                        ÊØèÂ§©2‰ªΩ‰π≥Âà∂ÂìÅÔºåÂøÉË°ÄÁÆ°Ê≠ª‰∫°È£éÈô©‰∏ãÈôç23%
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            ÊàíÈÖí
                            <span class="reference-icon" tabindex="0">üìä
                                <div class="reference-tooltip">
                                    <strong>ÁßëÂ≠¶‰æùÊçÆÔºö</strong><br>
                                    Wood AM, et al. Risk thresholds for alcohol consumption: combined analysis of individual-participant data for 599 912 current drinkers. Lancet. 2018.
                                    <a href="https://doi.org/10.1016/S0140-6736(18)30134-X" target="_blank" class="reference-link">üîó Êü•ÁúãÊñáÁåÆ</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-50% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="4" value="0" data-action="no-alcohol">
                        <span class="frequency-label" id="no-alcohol-label">ÊØèÂ§©Âñù</span>
                    </div>
                    <div class="action-description">
                        ÈÖíÁ≤æÂØπÂÅ•Â∫∑ÁôæÂÆ≥Êó†‰∏ÄÂà©ÔºåÊàíÈÖíÊòØÊúÄÊúâÊïàÁöÑÂª∂ÂØøÊñπÊ≥ï‰πã‰∏Ä
                    </div>
                </div>
            </div>

            <div class="category">
                <h3>üèÉ‚Äç‚ôÇÔ∏è ËøêÂä®ÈîªÁÇº (Exercise.execute())</h3>
                
                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            Êå•ÊãçËøêÂä®
                            <span class="reference-icon" tabindex="0">üìä
                                <div class="reference-tooltip">
                                    <strong>ÁßëÂ≠¶‰æùÊçÆÔºö</strong><br>
                                    Oja P, et al. Associations of specific types of sports and exercise with all-cause and cardiovascular-disease mortality: a cohort study of 80 306 British adults. Br J Sports Med. 2017.
                                    <a href="https://doi.org/10.1136/bjsports-2016-096822" target="_blank" class="reference-link">üîó Êü•ÁúãÊñáÁåÆ</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-47% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="5" value="0" data-action="racquet-sports">
                        <span class="frequency-label" id="racquet-sports-label">‰ªé‰∏ç</span>
                    </div>
                    <div class="action-description">
                        ÁΩëÁêÉ„ÄÅÁæΩÊØõÁêÉ„ÄÅ‰πí‰πìÁêÉÔºåÊØèÂë®3Ê¨°ÔºåÊØèÊ¨°45-60ÂàÜÈíü
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            ÂâßÁÉàËøêÂä®
                            <span class="reference-icon" tabindex="0">üìä
                                <div class="reference-tooltip">
                                    <strong>ÁßëÂ≠¶‰æùÊçÆÔºö</strong><br>
                                    Stamatakis E, et al. Association of wearable device-measured vigorous intermittent lifestyle physical activity with mortality. Nat Med. 2022.
                                    <a href="https://doi.org/10.1038/s41591-022-02100-x" target="_blank" class="reference-link">üîó Êü•ÁúãÊñáÁåÆ</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-16% ~ -40% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="7" value="0" data-action="vigorous-exercise">
                        <span class="frequency-label" id="vigorous-exercise-label">‰ªé‰∏ç</span>
                    </div>
                    <div class="action-description">
                        ÊØèÂ§©8ÂàÜÈíüÂâßÁÉàËøêÂä®ÔºåËÆ©ÂøÉÁéáÈ£ôÂçáÁöÑÈÇ£Áßç
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            Ê≠•Ë°å
                            <span class="reference-icon" tabindex="0">üìä
                                <div class="reference-tooltip">
                                    <strong>ÁßëÂ≠¶‰æùÊçÆÔºö</strong><br>
                                    Paluch AE, et al. Daily steps and all-cause mortality: a meta-analysis of 15 international cohorts. Lancet Public Health. 2022.
                                    <a href="https://doi.org/10.1016/S2468-2667(21)00302-9" target="_blank" class="reference-link">üîó Êü•ÁúãÊñáÁåÆ</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-50% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="4" value="0" data-action="walking">
                        <span class="frequency-label" id="walking-label">&lt;2000Ê≠•</span>
                    </div>
                    <div class="action-description">
                        ÊØèÂ§©7000Ê≠•‰ª•‰∏äÔºåËøúÁ¶ª‰πÖÂùêÁöÑÁ®ãÂ∫èÂëòËÅå‰∏öÁóÖ
                    </div>
                </div>
            </div>

            <div class="category">
                <h3>üåô ÁîüÊ¥ª‰π†ÊÉØ (Lifestyle.config())</h3>
                
                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            Áù°Áú†Ë¥®Èáè
                            <span class="reference-icon" tabindex="0">üìä
                                <div class="reference-tooltip">
                                    <strong>ÁßëÂ≠¶‰æùÊçÆÔºö</strong><br>
                                    Cappuccio FP, et al. Sleep duration and all-cause mortality: a systematic review and meta-analysis of prospective studies. Sleep. 2010.
                                    <a href="https://doi.org/10.1093/sleep/33.5.585" target="_blank" class="reference-link">üîó Êü•ÁúãÊñáÁåÆ</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">‰ºòÂåñACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="4" value="0" data-action="sleep">
                        <span class="frequency-label" id="sleep-label">ÂæàÂ∑Æ</span>
                    </div>
                    <div class="action-description">
                        ÊØèÂ§©7Â∞èÊó∂Ôºå22-24ÁÇπÂÖ•Áù°ÊúÄ‰Ω≥ÔºåËøúÁ¶ªÁÜ¨Â§úbug
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            Âà∑Áâô
                            <span class="reference-icon" tabindex="0">üìä
                                <div class="reference-tooltip">
                                    <strong>ÁßëÂ≠¶‰æùÊçÆÔºö</strong><br>
                                    Sen S, et al. Periodontal Disease, Regular Dental Care Use, and Incident Ischemic Stroke. Stroke. 2018.
                                    <a href="https://doi.org/10.1161/STROKEAHA.117.018990" target="_blank" class="reference-link">üîó Êü•ÁúãÊñáÁåÆ</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-25% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="3" value="0" data-action="brush-teeth">
                        <span class="frequency-label" id="brush-teeth-label">ÂæàÂ∞ë</span>
                    </div>
                    <div class="action-description">
                        ÊØèÂ§©2Ê¨°ÔºåÂè£ËÖîÂÅ•Â∫∑ÂΩ±ÂìçÂÖ®Ë∫´ÂÅ•Â∫∑
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            ÊôíÂ§™Èò≥
                            <span class="reference-icon" tabindex="0">üìä
                                <div class="reference-tooltip">
                                    <strong>ÁßëÂ≠¶‰æùÊçÆÔºö</strong><br>
                                    Lindqvist PG, et al. Avoidance of sun exposure as a risk factor for major causes of death: a competing risk analysis of the Melanoma in Southern Sweden cohort. J Intern Med. 2016.
                                    <a href="https://doi.org/10.1111/joim.12496" target="_blank" class="reference-link">üîó Êü•ÁúãÊñáÁåÆ</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-40% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="4" value="0" data-action="sunlight">
                        <span class="frequency-label" id="sunlight-label">‰ªé‰∏ç</span>
                    </div>
                    <div class="action-description">
                        ÈÄÇÂ∫¶Êó•ÁÖßÔºå‰øÉËøõÁª¥ÁîüÁ¥†DÂêàÊàêÔºåÂà´ÂΩìÂê∏Ë°ÄÈ¨ºÁ®ãÂ∫èÂëò
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            ÊàíÁÉü
                            <span class="reference-icon" tabindex="0">üìä
                                <div class="reference-tooltip">
                                    <strong>ÁßëÂ≠¶‰æùÊçÆÔºö</strong><br>
                                    Jha P, et al. 21st-century hazards of smoking and benefits of cessation in the United States. N Engl J Med. 2013.
                                    <a href="https://doi.org/10.1056/NEJMsa1211128" target="_blank" class="reference-link">üîó Êü•ÁúãÊñáÁåÆ</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-50% ACM +11Âπ¥</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="4" value="0" data-action="no-smoking">
                        <span class="frequency-label" id="no-smoking-label">ÈáçÂ∫¶Âê∏ÁÉü</span>
                    </div>
                    <div class="action-description">
                        Âê∏ÁÉüÂáèÂ∞ë11-12Âπ¥ÂØøÂëΩÔºåÊàíÁÉüÊòØÊúÄÈáçË¶ÅÁöÑÂª∂ÂØøË°åÂä®
                    </div>
                </div>

                <div class="action-item">
                    <div class="action-header">
                        <span class="action-name">
                            ‰ΩìÈáçÁÆ°ÁêÜ
                            <span class="reference-icon" tabindex="0">üìä
                                <div class="reference-tooltip">
                                    <strong>ÁßëÂ≠¶‰æùÊçÆÔºö</strong><br>
                                    Aune D, et al. BMI and all cause mortality: systematic review and non-linear dose-response meta-analysis of 230 cohort studies. BMJ. 2016.
                                    <a href="https://doi.org/10.1136/bmj.i2156" target="_blank" class="reference-link">üîó Êü•ÁúãÊñáÁåÆ</a>
                                </div>
                            </span>
                        </span>
                        <span class="action-benefit">-54% ACM</span>
                    </div>
                    <div class="action-controls">
                        <input type="range" class="slider" min="0" max="4" value="0" data-action="weight-management">
                        <span class="frequency-label" id="weight-management-label">ËÇ•ËÉñ</span>
                    </div>
                    <div class="action-description">
                        ‰øùÊåÅÂÅ•Â∫∑BMIÔºå‰ªéËÇ•ËÉñÂà∞Ë∂ÖÈáçÁöÑÂáèËÇ•ÊïàÊûúÊúÄÊòéÊòæ
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer-info">
            <p>ËÆ©‰ª£Á†ÅÂÉèÁîüÂëΩ‰∏ÄÊ†∑‰ºòÈõÖ</p>
            <p>¬© <span id="copyright-year">2025</span> meiyongxia | <span class="about-link" onclick="openAboutModal()">about</span></p>
        </div>
    </div>

    <div class="achievement" id="achievement">
        üéâ ÊàêÂ∞±Ëß£ÈîÅÔºöÂÅ•Â∫∑Á®ãÂ∫èÂëòÔºÅ
    </div>

    <!-- About Modal -->
    <div class="share-modal" id="aboutModal">
        <div class="share-card">
            <button class="close-modal" onclick="closeAboutModal()">√ó</button>
            <div class="share-header-new">
                <div class="share-title-new">// ABOUT</div>
            </div>
            <div class="about-content">
                <p><strong>ÂºÄÊ∫êÔºö</strong> <a href="https://github.com/scavin/buff-meiyongxia/" target="_blank">https://github.com/scavin/buff-meiyongxia/</a></p>
                <p><strong>ËÅîÁ≥ªÊàë‰ª¨:</strong> buff@meiyongxia.com</p>
                <p><strong>Áà±ÂèëÁîµ:</strong> <a href="https://afdian.com/a/qingxwa" target="_blank">https://afdian.com/a/qingxwa</a></p>
            </div>
        </div>
    </div>

    <!-- ÂàÜ‰∫´Ê®°ÊÄÅÊ°Ü -->
    <div class="share-modal" id="shareModal">
        <div class="share-card">
            <button class="close-modal" onclick="closeShareModal()">√ó</button>
            
            <div class="share-header-new">
                <div class="share-title-new">// ÂÅ•Â∫∑Êä•Âëä.LOG</div>
                <div class="share-subtitle-new">Á®ãÂ∫èÂëòÂª∂ÂØøÊåáÂçó</div>
            </div>

            <div class="share-inspirational-text">üèÜ ÊàëÊàêÂäühack‰∫ÜËá™Â∑±ÁöÑÁîüÂëΩ‰ª£Á†ÅÔºÅ</div>

            <div class="share-stats-new">
                <div class="share-stat-new">
                    <div class="icon">üõ°Ô∏è</div>
                    <div class="value" id="share-acm-new">0%</div>
                    <div class="label">ÁîüÂ≠ò‰ºòÂäøÊèêÂçá</div>
                </div>
                <div class="share-stat-new">
                    <div class="icon">‚ù§Ô∏è</div>
                    <div class="value" id="share-life-new">+0</div>
                    <div class="label">ÂØøÂëΩÂ¢ûÂä†</div>
                </div>
                <div class="share-stat-new">
                    <div class="icon">üèÜ</div>
                    <div class="value" id="share-score-new">0</div>
                    <div class="label">ÂÅ•Â∫∑ËØÑÂàÜ</div>
                </div>
            </div>

            <div class="share-level-container">
                <div id="share-level-display">üêõ Bug‰øÆÂ§ç‰∏≠</div>
                <div class="share-gauge-container">
                    <div class="share-gauge-background">
                        <div id="share-gauge-bar"></div>
                    </div>
                    <div id="share-gauge-text">0 / 1000</div>
                </div>
            </div>

            <div class="share-habits-container">
                <div class="share-habits-title">// Ê†∏ÂøÉÂÅ•Â∫∑‰π†ÊÉØ</div>
                <div id="share-top-habits-new"></div>
            </div>

            <div class="share-footer-new">
                <p>Âü∫‰∫éÈ°∂Á∫ßÊúüÂàäËÆ∫ÊñáÁöÑÂÅ•Â∫∑‰ºòÂåñ</p>
                <p class="link" id="share-url-display" onclick="copyShareUrl()">üîó buff.meiyongxia.com</p>
            </div>

            <div class="share-recommendation">
                <p>‚ú® Êé®ËçêÁîüÊàêÂõæÁâáÂàÜ‰∫´ÔºåÊïàÊûúÊõ¥‰Ω≥ÔºÅ</p>
            </div>
            <div class="share-buttons">
                <button class="share-platform-btn primary" onclick="generateShareImage()">
                    üì∏ ÁîüÊàêÂõæÁâá
                </button>
                <button class="share-platform-btn" onclick="openQrModal()">
                    üîó ÁîüÊàêÂàÜ‰∫´‰∫åÁª¥Á†Å
                </button>
                <button class="share-platform-btn" onclick="copyShareText()">
                    üìã Â§çÂà∂ÊñáÊ°à
                </button>
            </div>
        </div>
    </div>

    <!-- QR Code Modal -->
    <div class="share-modal" id="qrModal">
        <div class="share-card">
            <button class="close-modal" onclick="closeQrModal()">√ó</button>
            <div class="share-header-new">
                <div class="share-title-new">// SCAN_TO_SHARE</div>
            </div>
            <div id="qr-code-container">
                <p>Êâ´Êèè‰∫åÁª¥Á†ÅÔºåÂàÜ‰∫´ÊàñÊü•Áúã‰Ω†ÁöÑÂÅ•Â∫∑Êï∞ÊçÆÔºÅ</p>
            </div>
        </div>
    </div>

    <script>
        const actionData = {
            'white-meat': {
                benefits: [0, 1, 2, 3, 5, 7, 9, 11],
                labels: ['‰ªé‰∏ç', 'ÂæàÂ∞ë', 'ÂÅ∂Â∞î', '‰∏ÄËà¨', 'ÁªèÂ∏∏', 'ÂæàÂ§ö', '‰∏ªË¶Å', 'ÂÆåÂÖ®Êõø‰ª£'],
                reference: 'Pan A, et al. Red meat consumption and mortality: results from 2 prospective cohort studies. Arch Intern Med. 2012;172(7):555-563.',
                doi: 'https://doi.org/10.1001/archinternmed.2011.2287'
            },
            'vegetables-fruits': {
                benefits: [0, 5, 10, 15, 20, 26],
                labels: ['ÂæàÂ∞ë', '‰∏çÂ§ü', '‰∏ÄËà¨', 'ËæÉÂ§ö', 'ÂÖÖË∂≥', '‰∏∞ÂØå'],
                reference: 'Wang X, et al. Fruit and vegetable consumption and mortality from all causes, cardiovascular disease, and cancer: systematic review and dose-response meta-analysis. BMJ. 2014;349:g4490.',
                doi: 'https://doi.org/10.1136/bmj.g4490'
            },
            'nuts': {
                benefits: [0, 2, 4, 8, 15, 20, 25, 27],
                labels: ['‰ªé‰∏ç', 'ÂæàÂ∞ë', 'ÂÅ∂Â∞î', 'ÊØèÂë®1-2Ê¨°', 'ÊØèÂë®3-4Ê¨°', 'ÊØèÂë®5-6Ê¨°', 'ÊØèÂ§©', 'ÊØèÂ§©Â§öÊ¨°'],
                reference: 'Bao Y, et al. Association of nut consumption with total and cause-specific mortality. N Engl J Med. 2013;369(21):2001-2011.',
                doi: 'https://doi.org/10.1056/NEJMoa1307352'
            },
            'spicy-food': {
                benefits: [0, 2, 5, 8, 15, 20, 23, 23],
                labels: ['‰ªé‰∏ç', 'ÂæàÂ∞ë', 'ÂÅ∂Â∞î', 'ÊØèÂë®1-2Ê¨°', 'ÊØèÂë®3-4Ê¨°', 'ÊØèÂë®5+Ê¨°', 'ÊØèÂ§©', 'ÊØèÂ§©Â§öÊ¨°'],
                reference: 'Lv J, et al. Consumption of spicy foods and total and cause specific mortality: population based cohort study. BMJ. 2015;351:h3942.',
                doi: 'https://doi.org/10.1136/bmj.h3942'
            },
            'avoid-processed': {
                benefits: [0, 10, 25, 40, 62],
                labels: ['ÁªèÂ∏∏ÂêÉ', 'ÂÅ∂Â∞îÂêÉ', 'ÂæàÂ∞ëÂêÉ', 'Âü∫Êú¨‰∏çÂêÉ', 'ÂÆåÂÖ®ÈÅøÂÖç'],
                reference: 'Rico-Camp√† A, et al. Association between consumption of ultra-processed foods and all cause mortality: SUN prospective cohort study. BMJ. 2019;365:l1949.',
                doi: 'https://doi.org/10.1136/bmj.l1949'
            },
            'coffee': {
                benefits: [0, 5, 10, 15, 20, 22],
                labels: ['‰ªé‰∏ç', 'ÂÅ∂Â∞î', 'ÊØèÂ§©1ÊùØ', 'ÊØèÂ§©2ÊùØ', 'ÊØèÂ§©3ÊùØ', 'ÊØèÂ§©4+ÊùØ'],
                reference: 'Ding M, et al. Association of Coffee Consumption With Total and Cause-Specific Mortality in 3 Large Prospective Cohorts. Circulation. 2015;132(24):2305-2315.',
                doi: 'https://doi.org/10.1161/CIRCULATIONAHA.115.017341'
            },
            'tea': {
                benefits: [0, 3, 6, 10, 13, 15],
                labels: ['‰ªé‰∏ç', 'ÂÅ∂Â∞î', 'ÊØèÂë®1-2Ê¨°', 'ÊØèÂë®3+Ê¨°', 'ÊØèÂ§©', 'ÊØèÂ§©Â§öÊ¨°'],
                reference: 'Li X, et al. Tea consumption and risk of stroke in Chinese adults: a prospective cohort study of 0.5 million men and women. Lancet Public Health. 2020;5(1):e25-e33.',
                doi: 'https://doi.org/10.1016/S2468-2667(19)30227-7'
            },
            'milk': {
                benefits: [0, 5, 12, 17],
                labels: ['‰ªé‰∏ç', 'ÂÅ∂Â∞î', 'ÊØèÂ§©1‰ªΩ', 'ÊØèÂ§©2‰ªΩ+'],
                reference: 'Guo J, et al. Milk and dairy consumption and risk of cardiovascular diseases and all-cause mortality: dose-response meta-analysis of prospective cohort studies. Eur J Epidemiol. 2017;32(4):269-287.',
                doi: 'https://doi.org/10.1007/s10654-017-0243-1'
            },
            'no-alcohol': {
                benefits: [0, 10, 25, 40, 50],
                labels: ['ÊØèÂ§©Âñù', 'ÁªèÂ∏∏Âñù', 'ÂÅ∂Â∞îÂñù', 'ÂæàÂ∞ëÂñù', 'ÂÆåÂÖ®ÊàíÈÖí'],
                reference: 'Wood AM, et al. Risk thresholds for alcohol consumption: combined analysis of individual-participant data for 599 912 current drinkers. Lancet. 2018;391(10129):1513-1523.',
                doi: 'https://doi.org/10.1016/S0140-6736(18)30134-X'
            },
            'racquet-sports': {
                benefits: [0, 10, 25, 35, 45, 47],
                labels: ['‰ªé‰∏ç', 'ÂæàÂ∞ë', 'ÊØèÊúà1-2Ê¨°', 'ÊØèÂë®1Ê¨°', 'ÊØèÂë®2Ê¨°', 'ÊØèÂë®3Ê¨°+'],
                reference: 'Oja P, et al. Associations of specific types of sports and exercise with all-cause and cardiovascular-disease mortality: a cohort study of 80 306 British adults. Br J Sports Med. 2017;51(10):812-817.',
                doi: 'https://doi.org/10.1136/bjsports-2016-096822'
            },
            'vigorous-exercise': {
                benefits: [0, 5, 10, 16, 25, 35, 40, 40],
                labels: ['‰ªé‰∏ç', 'ÂæàÂ∞ë', 'ÊØèÂë®1Ê¨°', 'ÊØèÂë®2-3Ê¨°', 'ÊØèÂë®4-5Ê¨°', 'ÊØèÂë®6Ê¨°', 'ÊØèÂ§©', 'ÊØèÂ§©Â§öÊ¨°'],
                reference: 'Stamatakis E, et al. Association of wearable device-measured vigorous intermittent lifestyle physical activity with mortality. Nat Med. 2022;28(12):2521-2529.',
                doi: 'https://doi.org/10.1038/s41591-022-02100-x'
            },
            'walking': {
                benefits: [0, 10, 25, 40, 50],
                labels: ['<2000Ê≠•', '2000-5000Ê≠•', '5000-7000Ê≠•', '7000-10000Ê≠•', '10000Ê≠•+'],
                reference: 'Paluch AE, et al. Daily steps and all-cause mortality: a meta-analysis of 15 international cohorts. Lancet Public Health. 2022;7(3):e219-e228.',
                doi: 'https://doi.org/10.1016/S2468-2667(21)00302-9'
            },
            'sleep': {
                benefits: [0, 5, 10, 15, 20],
                labels: ['ÂæàÂ∑Æ(<5h)', '‰∏çÂ•Ω(5-6h)', '‰∏ÄËà¨(6-7h)', 'ËâØÂ•Ω(7-8h)', '‰ºòÁßÄ(7-8hËßÑÂæã)'],
                reference: 'Cappuccio FP, et al. Sleep duration and all-cause mortality: a systematic review and meta-analysis of prospective studies. Sleep. 2010;33(5):585-592.',
                doi: 'https://doi.org/10.1093/sleep/33.5.585'
            },
            'brush-teeth': {
                benefits: [0, 8, 18, 25],
                labels: ['ÂæàÂ∞ë', 'ÊØèÂ§©1Ê¨°', 'ÊØèÂ§©2Ê¨°', 'ÊØèÂ§©2Ê¨°+Êº±Âè£Ê∞¥'],
                reference: 'Sen S, et al. Periodontal Disease, Regular Dental Care Use, and Incident Ischemic Stroke. Stroke. 2018;49(2):355-362.',
                doi: 'https://doi.org/10.1161/STROKEAHA.117.018990'
            },
            'sunlight': {
                benefits: [0, 10, 20, 30, 40],
                labels: ['‰ªé‰∏ç', 'ÂæàÂ∞ë', 'ÂÅ∂Â∞î', 'ÁªèÂ∏∏', 'ÊØèÂ§©ÈÄÇÂ∫¶'],
                reference: 'Lindqvist PG, et al. Avoidance of sun exposure as a risk factor for major causes of death: a competing risk analysis of the Melanoma in Southern Sweden cohort. J Intern Med. 2016;280(4):375-387.',
                doi: 'https://doi.org/10.1111/joim.12496'
            },
            'no-smoking': {
                benefits: [0, 10, 25, 40, 50],
                labels: ['ÈáçÂ∫¶Âê∏ÁÉü', 'ËΩªÂ∫¶Âê∏ÁÉü', 'ÂÅ∂Â∞îÂê∏ÁÉü', 'Â∑≤ÊàíÁÉü', '‰ªé‰∏çÂê∏ÁÉü'],
                reference: 'Jha P, et al. 21st-century hazards of smoking and benefits of cessation in the United States. N Engl J Med. 2013;368(4):341-350.',
                doi: 'https://doi.org/10.1056/NEJMsa1211128'
            },
            'weight-management': {
                benefits: [0, 15, 30, 45, 54],
                labels: ['ËÇ•ËÉñ', 'Ë∂ÖÈáç', 'Ê≠£Â∏∏ÂÅèÈáç', 'Ê≠£Â∏∏', 'ÁêÜÊÉ≥‰ΩìÈáç'],
                reference: 'Aune D, et al. BMI and all cause mortality: systematic review and non-linear dose-response meta-analysis of 230 cohort studies. BMJ. 2016;353:i2156.',
                doi: 'https://doi.org/10.1136/bmj.i2156'
            }
        };

        const achievements = [
            { threshold: 50, message: "üéØ ÂàùÁ∫ßÂÅ•Â∫∑Á®ãÂ∫èÂëò" },
            { threshold: 100, message: "üèÉ‚Äç‚ôÇÔ∏è ‰∏≠Á∫ßÁîüÂëΩ‰ºòÂåñÂ∏à" },
            { threshold: 200, message: "üí™ È´òÁ∫ßÂª∂ÂØø‰∏ìÂÆ∂" },
            { threshold: 300, message: "üß¨ ‰º†ËØ¥Á∫ßÈïøÂØøÈªëÂÆ¢" },
            { threshold: 500, message: "üëë ‰∏çÊ≠ªÁ®ãÂ∫èÂëòÊàêÂ∞±Ëß£ÈîÅÔºÅ" }
        ];

        const healthLevels = [
            { minScore: 0, maxScore: 49, level: "üêõ Bug‰øÆÂ§ç‰∏≠", color: "#ff6b6b", description: "ÁîüÂëΩ‰ª£Á†ÅÈúÄË¶Ådebug" },
            { minScore: 50, maxScore: 99, level: "üå± ‰ª£Á†ÅÂ∞èÁôΩ", color: "#feca57", description: "ÂÅ•Â∫∑ÁºñÁ®ãÂÖ•Èó®" },
            { minScore: 100, maxScore: 199, level: "üíª ÂÖ®Ê†àÂÅ•Â∫∑Â∏à", color: "#48dbfb", description: "ÊéåÊè°ÂÅ•Â∫∑ÊäÄÊúØÊ†à" },
            { minScore: 200, maxScore: 299, level: "üöÄ ÁîüÂëΩÊû∂ÊûÑÂ∏à", color: "#ff9ff3", description: "ËÆæËÆ°‰∫∫ÁîüÁ≥ªÁªüÊû∂ÊûÑ" },
            { minScore: 300, maxScore: 499, level: "üß† ÈïøÂØøÁÆóÊ≥ïÂ§ßÂ∏à", color: "#54a0ff", description: "‰ºòÂåñÁîüÂëΩÁÆóÊ≥ï" },
            { minScore: 500, maxScore: 999, level: "üëë ‰∏çÊ≠ª‰ª£Á†Å‰πãÁ•û", color: "#5f27cd", description: "‰º†ËØ¥‰∏≠ÁöÑÂ≠òÂú®" },
            { minScore: 1000, maxScore: 9999, level: "üåü Ê∞∏ÁîüCTO", color: "#00d2d3", description: "ÊéåÊéß‰∏ÄÂàáÁîüÂëΩÈÄªËæë" }
        ];

        function getHealthLevelInfo(score) {
            for (let level of healthLevels) {
                if (score >= level.minScore && score <= level.maxScore) {
                    return level;
                }
            }
            return healthLevels[0]; // ÈªòËÆ§ËøîÂõûÁ¨¨‰∏ÄÁ∫ß
        }

        let lastAchievementIndex = -1;
        let hasShownSharePrompt = false;

        function updateResults() {
            let totalACMReduction = 0;
            let actionCount = 0;
            const benefits = [];

            Object.keys(actionData).forEach(action => {
                const slider = document.querySelector(`[data-action="${action}"]`);
                const value = parseInt(slider.value);
                const benefit = actionData[action].benefits[value];
                
                if (benefit > 0) {
                    benefits.push(benefit);
                    actionCount++;
                }
            });

            // ‰ΩøÁî®ÈÄíÂáèÊïàÂ∫îÊ®°ÂûãÔºåËÄå‰∏çÊòØÁÆÄÂçïÁ¥ØÂä†
            if (benefits.length > 0) {
                // ÊåâÊïàÁõä‰ªéÂ§ßÂà∞Â∞èÊéíÂ∫è
                benefits.sort((a, b) => b - a);
                
                // ÈÄíÂáèÊùÉÈáçËÆ°ÁÆóÔºöÁ¨¨‰∏Ä‰∏™100%ÔºåÁ¨¨‰∫å‰∏™80%ÔºåÁ¨¨‰∏â‰∏™60%Ôºå‰ª•Ê≠§Á±ªÊé®
                benefits.forEach((benefit, index) => {
                    const weight = Math.max(0.2, 1 - index * 0.2); // ÊúÄ‰ΩéÊùÉÈáç20%
                    totalACMReduction += benefit * weight;
                });
            }

            // ‰ΩøÁî®ÈÄíÂáèÁ≥ªÊï∞ÁöÑÁîüÂëΩÂª∂ÈïøËÆ°ÁÆóÔºåÈ´òACMÂÄº‰∏ãÂ¢ûÈïøÊîæÁºì‰ΩÜ‰∏ç‰ºöÂÅúÊ≠¢
            const lifeExtension = Math.max(0, 
                totalACMReduction <= 100 ? 
                    totalACMReduction * 0.08 : // 0-100%: ÊØè1%Â¢ûÂä†0.08Âπ¥
                    8 + (totalACMReduction - 100) * 0.04 // 100%+: ÊØè1%Â¢ûÂä†0.04Âπ¥
            );
            
            const healthScore = Math.min(1000, totalACMReduction * 2 + actionCount * 10);

            const levelInfo = getHealthLevelInfo(healthScore);

            document.getElementById('acm-reduction').textContent = `${totalACMReduction.toFixed(1)}%`;
            document.getElementById('life-extension').textContent = `+${lifeExtension.toFixed(1)}`;
            document.getElementById('health-score').textContent = healthScore.toFixed(0);
            
            const healthLevelElement = document.getElementById('health-level');
            const levelDescElement = document.getElementById('level-description');
            const levelCardElement = document.getElementById('health-level-card');
            
            healthLevelElement.textContent = levelInfo.level;
            healthLevelElement.style.color = levelInfo.color;
            levelDescElement.textContent = levelInfo.description;
            levelCardElement.style.borderColor = levelInfo.color;
            levelCardElement.style.boxShadow = `0 0 20px ${levelInfo.color}40`;

            checkAchievements(healthScore);
            
            checkSharePrompt(healthScore);
        }

        function checkSharePrompt(score) {
            if (score >= 200 && !hasShownSharePrompt) {
                hasShownSharePrompt = true;
                setTimeout(() => {
                    showAchievement("üéâ Â§™Ê£í‰∫ÜÔºÅË¶Å‰∏çË¶ÅÂàÜ‰∫´‰∏Ä‰∏ã‰Ω†ÁöÑÂÅ•Â∫∑ÊàêÊûúÔºü");
                    setTimeout(() => {
                        const shareBtn = document.querySelector('.share-btn');
                        shareBtn.style.animation = 'pulse 2s infinite';
                        setTimeout(() => {
                            shareBtn.style.animation = '';
                        }, 6000);
                    }, 2000);
                }, 1000);
            }
        }

        function checkAchievements(score) {
            for (let i = achievements.length - 1; i >= 0; i--) {
                if (score >= achievements[i].threshold && i > lastAchievementIndex) {
                    showAchievement(achievements[i].message);
                    lastAchievementIndex = i;
                    break;
                }
            }
        }

        function showAchievement(message) {
            const achievement = document.getElementById('achievement');
            
            // ÊèêÂèñemojiÂíåÊñáÊú¨
            const emojiMatch = message.match(/^([\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}])/u);
            let emoji = emojiMatch ? emojiMatch[0] : 'üéâ';
            let text = message.replace(emoji, '').trim();
            
            achievement.innerHTML = `<span class="achievement-icon">${emoji}</span>${text}`;
            achievement.classList.add('show');
            
            setTimeout(() => {
                achievement.classList.remove('show');
            }, 3000);
        }

        function initializeSliders() {
            Object.keys(actionData).forEach(action => {
                const slider = document.querySelector(`[data-action="${action}"]`);
                const label = document.getElementById(`${action}-label`);
                
                slider.addEventListener('input', function() {
                    const value = parseInt(this.value);
                    label.textContent = actionData[action].labels[value];
                    updateResults();
                });
                
                const initialValue = parseInt(slider.value);
                label.textContent = actionData[action].labels[initialValue];
            });
        }

        function initializeTooltips() {
            const tooltipIcons = document.querySelectorAll('.tooltip-icon');
            const referenceIcons = document.querySelectorAll('.reference-icon');
            
            tooltipIcons.forEach(icon => {
                icon.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const resultCard = this.closest('.result-card');
                    const isExpanded = resultCard.classList.contains('expanded');
                    
                    // Êî∂Ëµ∑ÂÖ∂‰ªñÂ∑≤Â±ïÂºÄÁöÑÂç°Áâá
                    document.querySelectorAll('.result-card.expanded').forEach(card => {
                        if (card !== resultCard) {
                            card.classList.remove('expanded');
                        }
                    });
                    
                    // ÂàáÊç¢ÂΩìÂâçÂç°ÁâáÁöÑÂ±ïÂºÄÁä∂ÊÄÅ
                    resultCard.classList.toggle('expanded');
                });
                
                icon.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        this.click();
                    }
                });
            });
            
            referenceIcons.forEach(icon => {
                icon.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    referenceIcons.forEach(other => {
                        if (other !== this) other.classList.remove('active');
                    });
                    this.classList.toggle('active');
                });
                
                icon.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        e.stopPropagation();
                        referenceIcons.forEach(other => {
                            if (other !== this) other.classList.remove('active');
                        });
                        this.classList.toggle('active');
                    }
                });
            });
            
            // ÁÇπÂáªÈ°µÈù¢ÂÖ∂‰ªñÂú∞ÊñπÊó∂Êî∂Ëµ∑ÊâÄÊúâÂ±ïÂºÄÁöÑÂç°Áâá
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.result-card')) {
                    document.querySelectorAll('.result-card.expanded').forEach(card => {
                        card.classList.remove('expanded');
                    });
                }
                
                if (!e.target.closest('.reference-icon')) {
                    referenceIcons.forEach(icon => icon.classList.remove('active'));
                }
            });
        }

        function openShareModal() {
            updateShareData();
            document.getElementById('shareModal').classList.add('show');
        }

        function closeShareModal() {
            document.getElementById('shareModal').classList.remove('show');
        }

        function openAboutModal() {
            document.getElementById('aboutModal').classList.add('show');
        }

        function closeAboutModal() {
            document.getElementById('aboutModal').classList.remove('show');
        }

        // ÁîüÊàêË∂ÖÁÆÄÊ¥ÅÁöÑÂàÜ‰∫´ID - ‰ΩøÁî®config.js‰∏≠ÁöÑÁâàÊú¨

        function generateQrCode() {
            const shareId = generateShareId();
            const shareUrl = `https://buff.meiyongxia.com?s=${shareId}`;
            
            // Ê∏ÖÁ©∫‰πãÂâçÁöÑ‰∫åÁª¥Á†Å
            const qrContainer = document.querySelector('#qr-code-container');
            const existingQr = qrContainer.querySelector('#qrcode');
            if (existingQr) {
                existingQr.remove();
            }
            
            // ÂàõÂª∫‰∫åÁª¥Á†ÅÂÆπÂô®
            const qrDiv = document.createElement('div');
            qrDiv.id = 'qrcode';
            qrDiv.style.display = 'flex';
            qrDiv.style.justifyContent = 'center';
            qrDiv.style.marginBottom = '20px';
            
            // ‰ΩøÁî®qrcodejsÂ∫ìÁîüÊàê‰∫åÁª¥Á†Å
            const qr = new QRCode(qrDiv, {
                text: shareUrl,
                width: 300,
                height: 300,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.M
            });
            
            // ÊèíÂÖ•‰∫åÁª¥Á†ÅÂà∞È°µÈù¢
            const img = qrContainer.querySelector('img');
            if (img) {
                img.parentNode.insertBefore(qrDiv, img);
                img.style.display = 'none';
            } else {
                qrContainer.insertBefore(qrDiv, qrContainer.firstChild);
            }
            
            // Êõ¥Êñ∞ÊòæÁ§∫ÁöÑÂàÜ‰∫´URL
            document.querySelector('#qr-code-container p').innerHTML = `
                <strong>ÂàÜ‰∫´ÈìæÊé•:</strong><br>
                <span style="color: #00ff41; font-size: 0.9em; word-break: break-all;">${shareUrl}</span><br><br>
                Êâ´Êèè‰∫åÁª¥Á†ÅÊàñÂàÜ‰∫´ÈìæÊé•ÔºåËÆ©ÊúãÂèãÊü•Áúã‰Ω†ÁöÑÂÅ•Â∫∑Êï∞ÊçÆÔºÅ
            `;
        }
        
        function openQrModal() {
            generateQrCode();
            document.getElementById('qrModal').classList.add('show');
        }
        
        function closeQrModal() {
            document.getElementById('qrModal').classList.remove('show');
        }

        function loadDataFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            const shareId = urlParams.get('s');
            
            if (!shareId) return;
            
            const dataToLoad = decodeShareId(shareId);
            
            if (dataToLoad && Object.keys(dataToLoad).length > 0) {
                // ÈáçÁΩÆÊâÄÊúâÊªëÂùóÂà∞ÈªòËÆ§ÂÄº
                Object.keys(actionData).forEach(action => {
                    const slider = document.querySelector(`[data-action="${action}"]`);
                    if (slider) {
                        slider.value = 0;
                    }
                });
                
                // ËÆæÁΩÆÂàÜ‰∫´ÁöÑÊï∞ÊçÆ
                Object.keys(dataToLoad).forEach(action => {
                    const slider = document.querySelector(`[data-action="${action}"]`);
                    if (slider) {
                        slider.value = dataToLoad[action];
                    }
                });
                
                // Êõ¥Êñ∞ÊâÄÊúâÊªëÂùóÊ†áÁ≠æ
                Object.keys(actionData).forEach(action => {
                    const slider = document.querySelector(`[data-action="${action}"]`);
                    const label = document.getElementById(`${action}-label`);
                    if (slider && label) {
                        const value = parseInt(slider.value);
                        label.textContent = actionData[action].labels[value];
                    }
                });
                
                updateResults();
                showAchievement("üîó Â∑≤Âä†ËΩΩÂàÜ‰∫´Êï∞ÊçÆ");
            }
        }

        function updateShareData() {
            const acm = document.getElementById('acm-reduction').textContent;
            const life = document.getElementById('life-extension').textContent;
            const score = parseInt(document.getElementById('health-score').textContent);
            const levelInfo = getHealthLevelInfo(score);

            document.getElementById('share-acm-new').textContent = acm;
            document.getElementById('share-life-new').textContent = life;
            document.getElementById('share-score-new').textContent = score;

            const levelDisplay = document.getElementById('share-level-display');
            levelDisplay.textContent = levelInfo.level;
            levelDisplay.style.color = levelInfo.color;

            const scorePercent = Math.min(score / 1000, 1) * 100;
            document.getElementById('share-gauge-bar').style.width = `${scorePercent}%`;
            document.getElementById('share-gauge-text').textContent = `${score} / 1000`;

            // Êõ¥Êñ∞ÂàÜ‰∫´URLÊòæÁ§∫
            const shareId = generateShareId();
            const shareUrl = `https://buff.meiyongxia.com?s=${shareId}`;
            document.getElementById('share-url-display').textContent = shareUrl;

            const topHabitsContainer = document.getElementById('share-top-habits-new');
            const habits = [];
            Object.keys(actionData).forEach(action => {
                const slider = document.querySelector(`[data-action="${action}"]`);
                const value = parseInt(slider.value);
                const benefit = actionData[action].benefits[value];
                if (benefit > 0) {
                    habits.push({
                        name: getActionDisplayName(action),
                        benefit: benefit,
                        level: actionData[action].labels[value]
                    });
                }
            });
            habits.sort((a, b) => b.benefit - a.benefit);
            
            // ÊòæÁ§∫ÊâÄÊúâÊúâËÆæÁΩÆÁöÑ‰π†ÊÉØÔºåËÄå‰∏çÊòØÂè™ÊòæÁ§∫Ââç3‰∏™
            const allHabits = habits;

            topHabitsContainer.innerHTML = allHabits.map(habit => `
                <div class="share-habit-item">
                    <div>
                        <span class="name">+ ${habit.name}</span>
                        <span class="level">- ${habit.level}</span>
                    </div>
                    <div class="benefit">-${habit.benefit.toFixed(1)}% ACM</div>
                </div>
            `).join('');
        }

        function getActionDisplayName(action) {
            const displayNames = {
                'white-meat': 'ÁôΩËÇâÊëÑÂÖ•',
                'vegetables-fruits': 'Ëî¨ÊûúÊëÑÂÖ•',
                'nuts': 'ÂùöÊûúÊëÑÂÖ•',
                'spicy-food': 'ËæõËæ£È£üÁâ©',
                'avoid-processed': 'ÈÅøÂÖçË∂ÖÂä†Â∑•È£üÁâ©',
                'coffee': 'ÂíñÂï°',
                'tea': 'Ëå∂',
                'milk': 'ÁâõÂ•∂',
                'no-alcohol': 'ÊàíÈÖí',
                'racquet-sports': 'Êå•ÊãçËøêÂä®',
                'vigorous-exercise': 'ÂâßÁÉàËøêÂä®',
                'walking': 'Ê≠•Ë°å',
                'sleep': 'Áù°Áú†Ë¥®Èáè',
                'brush-teeth': 'Âà∑Áâô',
                'sunlight': 'ÊôíÂ§™Èò≥',
                'no-smoking': 'ÊàíÁÉü',
                'weight-management': '‰ΩìÈáçÁÆ°ÁêÜ'
            };
            return displayNames[action] || action;
        }

        function getHealthLevel(score) {
            const levelInfo = getHealthLevelInfo(score);
            return levelInfo.level;
        }

        function generateShareText() {
            const acm = document.getElementById('acm-reduction').textContent;
            const life = document.getElementById('life-extension').textContent;
            const score = document.getElementById('health-score').textContent;
            const level = getHealthLevel(parseInt(score));
            
            const shareId = generateShareId();
            const shareUrl = `https://buff.meiyongxia.com?s=${shareId}`;
            
            return `üß¨ ÊàëÈÄöËøáÁßëÂ≠¶ÊñπÊ≥ïÂª∂Èïø‰∫Ü${life}Âπ¥ÂØøÂëΩÔºÅ
üìä ÁîüÂ≠ò‰ºòÂäøÊèêÂçáÔºö${acm}
üèÜ ÂÅ•Â∫∑Á≠âÁ∫ßÔºö${level}
üî¨ Âü∫‰∫éÈ°∂Á∫ßÊúüÂàäËÆ∫ÊñáÁöÑÂÅ•Â∫∑‰ºòÂåñ

Á®ãÂ∫èÂëò‰∏çÊòØÂè™ËÉΩ996Ôºå‰πüËÉΩÂÅ•Â∫∑ÈïøÂØøÔºÅ

${shareUrl}
#Á®ãÂ∫èÂëòÂÅ•Â∫∑ #ÁßëÂ≠¶Âª∂ÂØø #ÂÅ•Â∫∑‰ºòÂåñ`;
        }

        function shareToWeibo() {
            const text = generateShareText();
            const url = 'https://buff.meiyongxia.com';
            const weiboUrl = `https://service.weibo.com/share/share.php?url=${encodeURIComponent(url)}&title=${encodeURIComponent(text)}`;
            window.open(weiboUrl, '_blank');
        }

        function shareToTwitter() {
            const text = generateShareText().replace(/#Á®ãÂ∫èÂëòÂÅ•Â∫∑ #ÁßëÂ≠¶Âª∂ÂØø #ÂÅ•Â∫∑‰ºòÂåñ/, '#ProgrammerHealth #Longevity #HealthOptimization');
            const url = 'https://buff.meiyongxia.com';
            const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`;
            window.open(twitterUrl, '_blank');
        }

        function copyShareUrl() {
            const shareId = generateShareId();
            const shareUrl = `https://buff.meiyongxia.com?s=${shareId}`;
            
            navigator.clipboard.writeText(shareUrl).then(() => {
                showAchievement("üîó ÂàÜ‰∫´ÈìæÊé•Â∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥ÊùøÔºÅ");
            }).catch(() => {
                const textArea = document.createElement('textarea');
                textArea.value = shareUrl;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showAchievement("üîó ÂàÜ‰∫´ÈìæÊé•Â∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥ÊùøÔºÅ");
            });
        }

        function copyShareText() {
            const text = generateShareText();
            navigator.clipboard.writeText(text).then(() => {
                showAchievement("üìã ÂàÜ‰∫´ÊñáÊ°àÂ∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥ÊùøÔºÅ");
            }).catch(() => {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showAchievement("üìã ÂàÜ‰∫´ÊñáÊ°àÂ∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥ÊùøÔºÅ");
            });
        }

        function generateShareImage() {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const font = "'Microsoft YaHei', 'Monaco', 'Menlo', 'Ubuntu Mono', monospace";

            canvas.width = 800;
            
            function drawGlowText(text, x, y, size, color, glowColor, blur) {
                ctx.font = `${size}px ${font}`;
                ctx.shadowColor = glowColor;
                ctx.shadowBlur = blur;
                ctx.fillStyle = color;
                ctx.fillText(text, x, y);
                ctx.shadowBlur = 0;
            }

            function drawGrid(step, color) {
                ctx.strokeStyle = color;
                ctx.lineWidth = 0.5;
                for (let i = 0; i < canvas.width; i += step) {
                    ctx.beginPath();
                    ctx.moveTo(i, 0);
                    ctx.lineTo(i, canvas.height);
                    ctx.stroke();
                }
                for (let j = 0; j < canvas.height; j += step) {
                    ctx.beginPath();
                    ctx.moveTo(0, j);
                    ctx.lineTo(canvas.width, j);
                    ctx.stroke();
                }
            }

            // ÁîüÊàêÂàÜ‰∫´URLÁî®‰∫é‰∫åÁª¥Á†ÅÔºå‰∏ªÈ°µURLÁî®‰∫éÊòéÊñáÊòæÁ§∫
            const shareId = generateShareId();
            const qrShareUrl = `https://buff.meiyongxia.com?s=${shareId}`;
            const displayUrl = `https://buff.meiyongxia.com`;

            // ÁªòÂà∂ËÉåÊôØ
            ctx.fillStyle = '#0D1117';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            drawGrid(20, 'rgba(0, 255, 0, 0.05)');

            // ÁªòÂà∂ËæπÊ°Ü
            ctx.strokeStyle = '#00ff41';
            ctx.lineWidth = 4;
            ctx.strokeRect(2, 2, canvas.width - 4, canvas.height - 4);

            // Ê†áÈ¢ò
            ctx.textAlign = 'center';
            drawGlowText('// ÂÅ•Â∫∑Êä•Âëä.LOG', canvas.width / 2, 80, 36, '#00ff41', '#00ff41', 15);
            ctx.font = `18px ${font}`;
            ctx.fillStyle = '#888';
            ctx.fillText('Á®ãÂ∫èÂëòÂª∂ÂØøÊåáÂçó', canvas.width / 2, 120);
            
            ctx.fillStyle = '#00ff41';
            ctx.font = `bold 20px ${font}`;
            ctx.textAlign = 'center';
            ctx.fillText('üèÜ ÊàëÊàêÂäühack‰∫ÜËá™Â∑±ÁöÑÁîüÂëΩ‰ª£Á†ÅÔºÅ', canvas.width / 2, 160);

            // Ëé∑ÂèñÊï∞ÊçÆ
            const acm = document.getElementById('acm-reduction').textContent;
            const life = document.getElementById('life-extension').textContent;
            const score = parseInt(document.getElementById('health-score').textContent);
            const level = document.getElementById('health-level').textContent;
            const levelInfo = getHealthLevelInfo(score);

            // ÁªüËÆ°Êï∞ÊçÆ
            const stats = [
                { icon: 'üõ°Ô∏è', label: 'ÁîüÂ≠ò‰ºòÂäøÊèêÂçá', value: acm },
                { icon: '‚ù§Ô∏è', label: 'ÂØøÂëΩÂ¢ûÂä†', value: life },
                { icon: 'üèÜ', label: 'ÂÅ•Â∫∑ËØÑÂàÜ', value: score }
            ];

            stats.forEach((stat, index) => {
                const x = (canvas.width / 3) * (index + 0.5);
                ctx.font = `48px ${font}`;
                ctx.fillStyle = '#fff';
                ctx.fillText(stat.icon, x, 230);

                ctx.font = `bold 36px ${font}`;
                ctx.fillStyle = '#00ff41';
                ctx.fillText(stat.value, x, 280);

                ctx.font = `18px ${font}`;
                ctx.fillStyle = '#ccc';
                ctx.fillText(stat.label, x, 310);
            });

            // Á≠âÁ∫ßÊòæÁ§∫
            ctx.textAlign = 'center';
            drawGlowText(level, canvas.width / 2, 390, 40, levelInfo.color, levelInfo.color, 15);
            
            // ËøõÂ∫¶Êù°
            const gaugeWidth = 500;
            const gaugeX = (canvas.width - gaugeWidth) / 2;
            const scorePercent = Math.min(score / 1000, 1);

            ctx.fillStyle = 'rgba(0, 255, 0, 0.1)';
            ctx.fillRect(gaugeX, 430, gaugeWidth, 30);
            
            const gradient = ctx.createLinearGradient(gaugeX, 0, gaugeX + gaugeWidth, 0);
            gradient.addColorStop(0, '#5f27cd');
            gradient.addColorStop(0.5, '#00d2d3');
            gradient.addColorStop(1, '#00ff41');
            ctx.fillStyle = gradient;
            ctx.fillRect(gaugeX, 430, gaugeWidth * scorePercent, 30);

            ctx.strokeStyle = '#00ff41';
            ctx.lineWidth = 2;
            ctx.strokeRect(gaugeX, 430, gaugeWidth, 30);
            
            ctx.fillStyle = '#fff';
            ctx.font = `bold 16px ${font}`;
            ctx.textAlign = 'right';
            ctx.fillText(`${score} / 1000`, gaugeX + gaugeWidth - 10, 452);

            // Ê†∏ÂøÉÂÅ•Â∫∑‰π†ÊÉØ - ÊòæÁ§∫ÊâÄÊúâÊúâËÆæÁΩÆÁöÑ‰π†ÊÉØ
            ctx.textAlign = 'left';
            drawGlowText('// Ê†∏ÂøÉÂÅ•Â∫∑‰π†ÊÉØ', 50, 520, 24, '#00ff41', '#00ff41', 10);

            const habits = [];
            Object.keys(actionData).forEach(action => {
                const slider = document.querySelector(`[data-action="${action}"]`);
                const value = parseInt(slider.value);
                const benefit = actionData[action].benefits[value];
                if (benefit > 0) {
                    habits.push({
                        name: getActionDisplayName(action),
                        benefit: benefit,
                        level: actionData[action].labels[value]
                    });
                }
            });
            habits.sort((a, b) => b.benefit - a.benefit);
            
            // ÊòæÁ§∫ÊâÄÊúâÊúâËÆæÁΩÆÁöÑ‰π†ÊÉØÔºåËÄå‰∏çÊòØÂè™ÊòæÁ§∫Ââç6‰∏™
            const allHabits = habits;
            
            allHabits.forEach((habit, index) => {
                const y = 580 + index * 60;
                ctx.fillStyle = 'rgba(0, 255, 0, 0.05)';
                ctx.fillRect(50, y - 30, canvas.width - 100, 60);
                
                ctx.fillStyle = '#00ff41';
                ctx.fillRect(50, y - 30, 5, 60);

                ctx.font = `bold 20px ${font}`;
                ctx.fillStyle = '#fff';
                ctx.fillText(`+ ${habit.name}`, 70, y);

                ctx.font = `16px ${font}`;
                ctx.fillStyle = '#ccc';
                ctx.fillText(`  - ${habit.level}`, 70, y + 25);

                ctx.textAlign = 'right';
                drawGlowText(`-${habit.benefit.toFixed(1)}% ACM`, canvas.width - 70, y + 10, 24, '#ffa500', '#ffa500', 10);
                ctx.textAlign = 'left';
            });

            // ËÆæÁΩÆÊúÄÁªàÁîªÂ∏ÉÈ´òÂ∫¶
            canvas.height = dynamicHeight;
            
            // ÈáçÊñ∞ÁªòÂà∂ËÉåÊôØ„ÄÅÁΩëÊ†ºÂíåËæπÊ°Ü‰ª•ÂåπÈÖçÊñ∞È´òÂ∫¶
            ctx.fillStyle = '#0D1117';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            drawGrid(20, 'rgba(0, 255, 0, 0.05)');
            
            ctx.strokeStyle = '#00ff41';
            ctx.lineWidth = 4;
            ctx.strokeRect(2, 2, canvas.width - 4, canvas.height - 4);

            // Â∫ïÈÉ®‰ø°ÊÅØÂíå‰∫åÁª¥Á†ÅÂå∫Âüü - Â±Ö‰∏≠Â∏ÉÂ±Ä
            const bottomY = dynamicHeight - 200; // Ë∞ÉÊï¥Â∫ïÈÉ®Á©∫Èó¥
            
            ctx.textAlign = 'center';
            ctx.font = `16px ${font}`;
            ctx.fillStyle = '#888';
            ctx.fillText('Âü∫‰∫éÈ°∂Á∫ßÊúüÂàäËÆ∫ÊñáÁöÑÂÅ•Â∫∑‰ºòÂåñ', canvas.width / 2, bottomY);
            
            // ‰ΩøÁî®qrcodejsÂ∫ìÁîüÊàê‰∫åÁª¥Á†Å
            const qrSize = 100; // Á®çÂæÆÂáèÂ∞è‰∫åÁª¥Á†ÅÂ∞∫ÂØ∏‰∏∫ÈìæÊé•ÁïôÊõ¥Â§öÁ©∫Èó¥
            
            // ÂàõÂª∫‰∏¥Êó∂ÁöÑ‰∫åÁª¥Á†ÅÂÆπÂô®
            const tempDiv = document.createElement('div');
            tempDiv.style.position = 'absolute';
            tempDiv.style.left = '-9999px';
            tempDiv.style.top = '-9999px';
            document.body.appendChild(tempDiv);
            
            try {
                const qr = new QRCode(tempDiv, {
                    text: qrShareUrl,
                    width: qrSize,
                    height: qrSize,
                    colorDark: "#000000",
                    colorLight: "#ffffff",
                    correctLevel: QRCode.CorrectLevel.M
                });
                
                // Á≠âÂæÖ‰∫åÁª¥Á†ÅÁîüÊàêÂÆåÊàê
                setTimeout(() => {
                    const qrImg = tempDiv.querySelector('img');
                    if (qrImg && qrImg.complete) {
                        // ‰∫åÁª¥Á†ÅÂ±Ö‰∏≠ÊòæÁ§∫
                        const qrX = (canvas.width - qrSize) / 2;
                        const qrY = bottomY + 40;
                        
                        // ÁªòÂà∂‰∫åÁª¥Á†ÅËÉåÊôØ
                        ctx.fillStyle = '#fff';
                        ctx.fillRect(qrX - 10, qrY - 10, qrSize + 20, qrSize + 20);
                        
                        // ÁªòÂà∂‰∫åÁª¥Á†ÅËæπÊ°Ü
                        ctx.strokeStyle = '#00ff41';
                        ctx.lineWidth = 2;
                        ctx.strokeRect(qrX - 10, qrY - 10, qrSize + 20, qrSize + 20);
                        
                        // ÁªòÂà∂‰∫åÁª¥Á†Å
                        ctx.drawImage(qrImg, qrX, qrY, qrSize, qrSize);
                        
                        // Âú®‰∫åÁª¥Á†Å‰∏ãÊñπÂ±Ö‰∏≠ÊòæÁ§∫ÈìæÊé•ÔºåÁÆÄÊ¥ÅËÆæËÆ°
                        ctx.textAlign = 'center';
                        ctx.font = `14px ${font}`;
                        ctx.fillStyle = '#00ff41';
                        
                        // ËÆ°ÁÆóÈìæÊé•‰ΩçÁΩÆÔºåÁ°Æ‰øùÂú®ÂõæÁâáËåÉÂõ¥ÂÜÖ
                        const linkY = qrY + qrSize + 25;
                        // ÊòæÁ§∫‰∏ªÈ°µÈìæÊé•
                        ctx.fillText(displayUrl, canvas.width / 2, linkY);
                        
                        // Âú®Â∫ïÈÉ®Ê∑ªÂä†MeiyongxiaÂ≠óÊ†∑
                        ctx.textAlign = 'center';
                        ctx.font = `10px ${font}`;
                        ctx.fillStyle = '#666';
                        ctx.fillText('Meiyongxia', canvas.width / 2, linkY + 50);
                        
                        // Ê∏ÖÁêÜ‰∏¥Êó∂ÂÆπÂô®
                        document.body.removeChild(tempDiv);
                        
                        // ÂØºÂá∫ÂõæÁâá
                        canvas.toBlob(function(blob) {
                            const url = URL.createObjectURL(blob);
                            const a = document.createElement('a');
                            a.href = url;
                            a.download = `health_report-${new Date().toISOString().slice(0, 10)}.png`;
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                            URL.revokeObjectURL(url);
                            showAchievement("üì∏ ÂÅ•Â∫∑Êä•ÂëäÂ∑≤ÁîüÊàêÂπ∂‰∏ãËΩΩÔºÅ");
                        }, 'image/png');
                    } else {
                        // Â¶ÇÊûú‰∫åÁª¥Á†ÅÁîüÊàêÂ§±Ë¥•ÔºåÈôçÁ∫ßÂ§ÑÁêÜ
                        document.body.removeChild(tempDiv);
                        fallbackExport();
                    }
                }, 500);
                
            } catch (error) {
                console.error('QR code generation failed:', error);
                document.body.removeChild(tempDiv);
                fallbackExport();
            }
            
            function fallbackExport() {
                // ÈôçÁ∫ßÔºö‰∏çÂåÖÂê´‰∫åÁª¥Á†ÅÁöÑÂõæÁâáÔºåÂè™ÊòæÁ§∫ÈìæÊé•
                ctx.textAlign = 'center';
                ctx.font = `16px ${font}`;
                ctx.fillStyle = '#00ff41';
                
                const linkY = bottomY + 60;
                // ÊòæÁ§∫‰∏ªÈ°µÈìæÊé•
                ctx.fillText(displayUrl, canvas.width / 2, linkY);
                
                // Âú®Â∫ïÈÉ®Ê∑ªÂä†MeiyongxiaÂ≠óÊ†∑
                ctx.textAlign = 'center';
                ctx.font = `10px ${font}`;
                ctx.fillStyle = '#666';
                ctx.fillText('Meiyongxia', canvas.width / 2, linkY + 50);
                
                canvas.toBlob(function(blob) {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `health_report-${new Date().toISOString().slice(0, 10)}.png`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    showAchievement("üì∏ ÂÅ•Â∫∑Êä•ÂëäÂ∑≤ÁîüÊàêÂπ∂‰∏ãËΩΩÔºÅ");
                }, 'image/png');
            }
        }

        document.addEventListener('click', function(e) {
            const shareModal = document.getElementById('shareModal');
            if (e.target === shareModal) {
                closeShareModal();
            }
            const aboutModal = document.getElementById('aboutModal');
            if (e.target === aboutModal) {
                closeAboutModal();
            }
            const qrModal = document.getElementById('qrModal');
            if (e.target === qrModal) {
                closeQrModal();
            }
        });

        document.addEventListener('DOMContentLoaded', function() {
            initializeSliders();
            initializeTooltips();
            updateResults();
            loadDataFromUrl(); // Load data on page load
            document.getElementById('copyright-year').textContent = new Date().getFullYear();
            
            setTimeout(() => {
                showAchievement("üöÄ Ê¨¢Ëøé‰ΩøÁî®Á®ãÂ∫èÂëòÂª∂ÂØøËÆ°ÁÆóÂô®ÔºÅ");
            }, 1000);
        });
    </script>
</body>
</html>
